{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#mindyolo","title":"MindYOLO","text":"<p>MindYOLO is MindSpore Lab's software toolbox that implements state-of-the-art YOLO series algorithms, support list and benchmark. It is written in Python and powered by the MindSpore AI framework.</p> <p>The master branch supporting MindSpore 2.0/2.1.</p> <p></p>"},{"location":"#what-is-new","title":"What is New","text":"<ul> <li>2023/09/05</li> </ul> <ol> <li>Add YOLOv8-X segment model.</li> <li>Dataset pipeline reconstruction(current supports seg/detect tasks).</li> <li>Add IoU custom operators example on GPU.</li> <li>Add distribute eval function.</li> <li>Add fast coco eval api.</li> <li>Tutorials and Docs update(e.q. Write a new model, Train Process Tutorial, ...).</li> </ol>"},{"location":"#benchmark-and-model-zoo","title":"Benchmark and Model Zoo","text":"<p>See MODEL ZOO.</p> Supported Algorithms <ul> <li> YOLOv8</li> <li> YOLOv7</li> <li> YOLOX</li> <li> YOLOv5</li> <li> YOLOv4</li> <li> YOLOv3</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>See INSTALLATION for details.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>See GETTING STARTED for details.</p>"},{"location":"#learn-more-about-mindyolo","title":"Learn More about MindYOLO","text":"<p>To be supplemented.</p>"},{"location":"#notes","title":"Notes","text":"<p>\u26a0\ufe0f The current version is based on the static shape of GRAPH. The dynamic shape of the PYNATIVE will be supported later. Please look forward to it.</p>"},{"location":"#how-to-contribute","title":"How to Contribute","text":"<p>We appreciate all contributions including issues and PRs to make MindYOLO better. </p> <p>Please refer to CONTRIBUTING.md for the contributing guideline.</p>"},{"location":"#license","title":"License","text":"<p>MindYOLO is released under the Apache License 2.0.</p>"},{"location":"#acknowledgement","title":"Acknowledgement","text":"<p>MindYOLO is an open source project that welcome any contribution and feedback. We wish that the toolbox and benchmark could support the growing research community, reimplement existing methods, and develop their own new real-time object detection methods by providing a flexible and standardized toolkit.</p>"},{"location":"#citation","title":"Citation","text":"<p>If you find this project useful in your research, please consider cite:</p> <pre><code>@misc{MindSpore Object Detection YOLO 2023,\n    title={{MindSpore Object Detection YOLO}:MindSpore Object Detection YOLO Toolbox and Benchmark},\n    author={MindSpore YOLO Contributors},\n    howpublished = {\\url{https://github.com/mindspore-lab/mindyolo}},\n    year={2023}\n}\n</code></pre>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#dependency","title":"Dependency","text":"<ul> <li>mindspore &gt;= 2.0</li> <li>numpy &gt;= 1.17.0</li> <li>pyyaml &gt;= 5.3</li> <li>openmpi 4.0.3 (for distributed mode)</li> </ul> <p>To install the dependency, please run</p> <pre><code>pip install -r requirements.txt\n</code></pre> <p>MindSpore can be easily installed by following the official instructions where you can select your hardware platform for the best fit. To run in distributed mode, openmpi is required to install.</p> <p>\u26a0\ufe0f The current version only supports the Ascend platform, and the GPU platform will be supported later.</p>"},{"location":"installation/#install-with-pypi","title":"Install with PyPI","text":"<p>MindYOLO is published as a <code>Python package</code> and can be installed with <code>pip</code>, ideally by using a <code>virtual environment</code>. Open up a terminal and install MindYOLO with:</p> <pre><code>pip install mindyolo\n</code></pre>"},{"location":"installation/#install-from-source-bleeding-edge-version","title":"Install from Source (Bleeding Edge Version)","text":""},{"location":"installation/#from-vcs","title":"from VCS","text":"<pre><code>pip install git+https://github.com/mindspore-lab/mindyolo.git\n</code></pre>"},{"location":"installation/#from-local-src","title":"from local src","text":"<p>As this project is in active development, if you are a developer or contributor, please prefer this installation!</p> <p>MindYOLO can be directly used from <code>GitHub</code> by cloning the repository into a local folder which might be useful if you want to use the very latest version:</p> <pre><code>git clone https://github.com/mindspore-lab/mindyolo.git\n</code></pre> <p>After cloning from <code>git</code>, it is recommended that you install using \"editable\" mode, which can help resolve potential module import issues:</p> <pre><code>cd mindyolo\npip install -e .\n</code></pre> <p>In addition, we provide an optional fast coco api to improve eval speed. The code is provided in C++, and you can try compiling with the following commands (This operation is optional) :</p> <pre><code>cd mindyolo/csrc\nsh build.sh\n</code></pre> <p>We also provide fused GPU operators which are built upon MindSpore ops.Custom API. The fused GPU operators are able to improve train speed. The source code is provided in C++ and CUDA and is in the folder <code>examples/custom_gpu_op/</code>. To enable this feature in the GPU training process, you shall modify the method <code>bbox_iou</code> in <code>mindyolo/models/losses/iou_loss.py</code> by referring to the demo script <code>examples/custom_gpu_op/iou_loss_fused.py</code>. Before runing <code>iou_loss_fused.py</code>, you shall compile the C++ and CUDA source code to dynamic link libraries with the following commands (This operation is optional) :</p> <pre><code>bash examples/custom_gpu_op/fused_op/build.sh\n</code></pre>"},{"location":"modelzoo/","title":"Model Zoo","text":""},{"location":"modelzoo/#mindyolo-model-zoo-and-baselines","title":"MindYOLO Model Zoo and Baselines","text":""},{"location":"modelzoo/#detection","title":"Detection","text":"Name Scale Context ImageSize Dataset Box mAP (%) Params FLOPs Recipe Download YOLOv8 N D910x8-G 640 MS COCO 2017 37.2 3.2M 8.7G yaml weights YOLOv8 S D910x8-G 640 MS COCO 2017 44.6 11.2M 28.6G yaml weights YOLOv8 M D910x8-G 640 MS COCO 2017 50.5 25.9M 78.9G yaml weights YOLOv8 L D910x8-G 640 MS COCO 2017 52.8 43.7M 165.2G yaml weights YOLOv8 X D910x8-G 640 MS COCO 2017 53.7 68.2M 257.8G yaml weights YOLOv7 Tiny D910x8-G 640 MS COCO 2017 37.5 6.2M 13.8G yaml weights YOLOv7 L D910x8-G 640 MS COCO 2017 50.8 36.9M 104.7G yaml weights YOLOv7 X D910x8-G 640 MS COCO 2017 52.4 71.3M 189.9G yaml weights YOLOv5 N D910x8-G 640 MS COCO 2017 27.3 1.9M 4.5G yaml weights YOLOv5 S D910x8-G 640 MS COCO 2017 37.6 7.2M 16.5G yaml weights YOLOv5 M D910x8-G 640 MS COCO 2017 44.9 21.2M 49.0G yaml weights YOLOv5 L D910x8-G 640 MS COCO 2017 48.5 46.5M 109.1G yaml weights YOLOv5 X D910x8-G 640 MS COCO 2017 50.5 86.7M 205.7G yaml weights YOLOv4 CSPDarknet53 D910x8-G 608 MS COCO 2017 45.4 27.6M 52G yaml weights YOLOv4 CSPDarknet53(silu) D910x8-G 608 MS COCO 2017 45.8 27.6M 52G yaml weights YOLOv3 Darknet53 D910x8-G 640 MS COCO 2017 45.5 61.9M 156.4G yaml weights YOLOX N D910x8-G 416 MS COCO 2017 24.1 0.9M 1.1G yaml weights YOLOX Tiny D910x8-G 416 MS COCO 2017 33.3 5.1M 6.5G yaml weights YOLOX S D910x8-G 640 MS COCO 2017 40.7 9.0M 26.8G yaml weights YOLOX M D910x8-G 640 MS COCO 2017 46.7 25.3M 73.8G yaml weights YOLOX L D910x8-G 640 MS COCO 2017 49.2 54.2M 155.6G yaml weights YOLOX X D910x8-G 640 MS COCO 2017 51.6 99.1M 281.9G yaml weights YOLOX Darknet53 D910x8-G 640 MS COCO 2017 47.7 63.7M 185.3G yaml weights"},{"location":"modelzoo/#segmentation","title":"Segmentation","text":"Name Scale Context ImageSize Dataset Box mAP (%) Mask mAP (%) Params FLOPs Recipe Download YOLOv8-seg X D910x8-G 640 MS COCO 2017 52.5 42.9 71.8M 344.1G yaml weights"},{"location":"modelzoo/#depoly-inference","title":"Depoly inference","text":"<ul> <li>See support list</li> </ul>"},{"location":"modelzoo/#notes","title":"Notes","text":"<ul> <li>Context: Training context denoted as {device}x{pieces}-{MS mode}, where mindspore mode can be G - graph mode or F - pynative mode with ms function. For example, D910x8-G is for training on 8 pieces of Ascend 910 NPU using graph mode.</li> <li>Box mAP: Accuracy reported on the validation set.</li> </ul>"},{"location":"how_to_guides/write_a_new_model/","title":"Write A New Model","text":"<p>comming soon.</p>"},{"location":"notes/changelog/","title":"Change Log","text":"<p>Coming soon.</p>"},{"location":"notes/code_of_conduct/","title":"Code of Conduct","text":"<p>Coming soon.</p>"},{"location":"notes/contributing/","title":"Contributing","text":""},{"location":"notes/contributing/#mindyolo-contributing-guidelines","title":"MindYOLO contributing guidelines","text":"<ul> <li>MindYOLO contributing guidelines<ul> <li>Contributor License Agreement</li> <li>Getting Started</li> <li>Contribution workflow<ul> <li>Code style</li> <li>Fork-Pull development model</li> <li>Report issues</li> <li>Propose PRs</li> </ul> </li> </ul> </li> </ul>"},{"location":"notes/contributing/#contributor-license-agreement","title":"Contributor License Agreement","text":"<p>It's required to sign CLA before your first code submission to MindYOLO community.</p> <p>For individual contributor, please refer to ICLA online document for the detailed information.</p>"},{"location":"notes/contributing/#getting-started","title":"Getting Started","text":"<ul> <li>Fork the repository on Github.</li> <li>Read the README.md.</li> </ul>"},{"location":"notes/contributing/#contribution-workflow","title":"Contribution Workflow","text":""},{"location":"notes/contributing/#code-style","title":"Code style","text":"<p>Please follow this style to make MindYOLO easy to review, maintain and develop.</p> <ul> <li> <p>Coding guidelines</p> <p>The Python coding style suggested by Python PEP 8 Coding Style and C++ coding style suggested by Google C++ Coding Guidelines are used in MindYOLO community. The CppLint, CppCheck, CMakeLint, CodeSpell, Lizard, ShellCheck and PyLint are used to check the format of codes, installing these plugins in your IDE is recommended.</p> </li> <li> <p>Unittest guidelines</p> <p>The Python unittest style suggested by pytest and C++ unittest style suggested by Googletest Primer are used in MindYOLO community. The design intent of a testcase should be reflected by its name of comment.</p> </li> <li> <p>Refactoring guidelines</p> <p>We encourage developers to refactor our code to eliminate the code smell. All codes should conform to needs to the coding style and testing style, and refactoring codes are no exception. Lizard threshold for nloc (lines of code without comments) is 100 and for cnc (cyclomatic complexity number) is 20, when you receive a Lizard warning, you have to refactor the code you want to merge.</p> </li> <li> <p>Document guidelines</p> <p>We use MarkdownLint to check the format of markdown documents. MindYOLO CI modifies the following rules based on the default configuration. - MD007 (unordered list indentation): The indent parameter is set to 4, indicating that all content in the unordered list needs to be indented using four spaces. - MD009 (spaces at the line end): The br_spaces parameter is set to 2, indicating that there can be 0 or 2 spaces at the end of a line. - MD029 (sequence numbers of an ordered list): The style parameter is set to ordered, indicating that the sequence numbers of the ordered list are in ascending order.</p> <p>For details, please refer to RULES.</p> </li> </ul>"},{"location":"notes/contributing/#fork-pull-development-model","title":"Fork-Pull development model","text":"<ul> <li> <p>Fork MindYOLO repository</p> <p>Before submitting code to MindYOLO project, please make sure that this project have been forked to your own repository. It means that there will be parallel development between MindYOLO repository and your own repository, so be careful to avoid the inconsistency between them.</p> </li> <li> <p>Clone the remote repository</p> <p>If you want to download the code to the local machine, <code>git</code> is the best way:</p> <pre><code># For GitHub\ngit clone https://github.com/{insert_your_forked_repo}/mindyolo.git\ngit remote add upstream https://github.com/mindspore-lab/mindyolo.git\n</code></pre> </li> <li> <p>Develop code locally</p> <p>To avoid inconsistency between multiple branches, checking out to a new branch is <code>SUGGESTED</code>:</p> <pre><code>git checkout -b {new_branch_name} origin/master\n</code></pre> <p>Taking the master branch as an example, MindYOLO may create version branches and downstream development branches as needed, please fix bugs upstream first. Then you can change the code arbitrarily.</p> </li> <li> <p>Push the code to the remote repository</p> <p>After updating the code, you should push the update in the formal way:</p> <pre><code>git add .\ngit status # Check the update status\ngit commit -m \"Your commit title\"\ngit commit -s --amend #Add the concrete description of your commit\ngit push origin {new_branch_name}\n</code></pre> </li> <li> <p>Pull a request to MindYOLO repository</p> <p>In the last step, your need to pull a compare request between your new branch and MindYOLO <code>master</code> branch. After finishing the pull request, the Jenkins CI will be automatically set up for building test. Your pull request should be merged into the upstream master branch as soon as possible to reduce the risk of merging.</p> </li> </ul>"},{"location":"notes/contributing/#report-issues","title":"Report issues","text":"<p>A great way to contribute to the project is to send a detailed report when you encounter an issue. We always appreciate a well-written, thorough bug report, and will thank you for it!</p> <p>When reporting issues, refer to this format:</p> <ul> <li>What version of env (MindSpore, os, python, MindYOLO etc) are you using?</li> <li>Is this a BUG REPORT or FEATURE REQUEST?</li> <li>What kind of issue is, add the labels to highlight it on the issue dashboard.</li> <li>What happened?</li> <li>What you expected to happen?</li> <li>How to reproduce it?(as minimally and precisely as possible)</li> <li>Special notes for your reviewers?</li> </ul> <p>Issues advisory:</p> <ul> <li>If you find an unclosed issue, which is exactly what you are going to solve, please put some comments on that issue to tell others you would be in charge of it.</li> <li>If an issue is opened for a while, it's recommended for contributors to precheck before working on solving that issue.</li> <li>If you resolve an issue which is reported by yourself, it's also required to let others know before closing that issue.</li> <li>If you want the issue to be responded as quickly as possible, please try to label it, you can find kinds of labels on Label List</li> </ul>"},{"location":"notes/contributing/#propose-prs","title":"Propose PRs","text":"<ul> <li>Raise your idea as an issue on GitHub </li> <li>If it is a new feature that needs lots of design details, a design proposal should also be submitted.</li> <li>After reaching consensus in the issue discussions and design proposal reviews, complete the development on the forked repo and submit a PR.</li> <li>None of PRs is not permitted until it receives 2+ LGTM from approvers. Please NOTICE that approver is NOT allowed to add LGTM on his own PR.</li> <li>After PR is sufficiently discussed, it will get merged, abandoned or rejected depending on the outcome of the discussion.</li> </ul> <p>PRs advisory:</p> <ul> <li>Any irrelevant changes should be avoided.</li> <li>Make sure your commit history being ordered.</li> <li>Always keep your branch up with the master branch.</li> <li>For bug-fix PRs, make sure all related issues being linked.</li> </ul>"},{"location":"notes/faq/","title":"FAQ","text":"<p>Coming soon.</p>"},{"location":"reference/data/","title":"Data","text":""},{"location":"reference/data/#comming-soon","title":"comming soon","text":""},{"location":"reference/loss/","title":"Loss","text":""},{"location":"reference/loss/#loss-factory","title":"Loss Factory","text":""},{"location":"reference/models/","title":"Models","text":""},{"location":"reference/models/#create-model","title":"Create Model","text":""},{"location":"reference/models/#mindyolo.models.model_factory.create_model","title":"<code>mindyolo.models.model_factory.create_model(model_name, model_cfg=None, in_channels=3, num_classes=80, checkpoint_path='', **kwargs)</code>","text":"Source code in <code>mindyolo/models/model_factory.py</code> <pre><code>def create_model(\n    model_name: str,\n    model_cfg: dict = None,\n    in_channels: int = 3,\n    num_classes: int = 80,\n    checkpoint_path: str = \"\",\n    **kwargs,\n):\n    model_args = dict(cfg=model_cfg, num_classes=num_classes, in_channels=in_channels)\n    kwargs = {k: v for k, v in kwargs.items() if v is not None}\n\n    if not is_model(model_name):\n        raise RuntimeError(f\"Unknown model {model_name}\")\n\n    create_fn = model_entrypoint(model_name)\n    model = create_fn(**model_args, **kwargs)\n\n    if checkpoint_path:\n        assert os.path.isfile(checkpoint_path) and checkpoint_path.endswith(\n            \".ckpt\"\n        ), f\"[{checkpoint_path}] not a ckpt file.\"\n        checkpoint_param = load_checkpoint(checkpoint_path)\n        load_param_into_net(model, checkpoint_param)\n        logger.info(f\"Load checkpoint from [{checkpoint_path}] success.\")\n\n    return model\n</code></pre>"},{"location":"reference/models/#yolov3_head","title":"yolov3_head","text":""},{"location":"reference/models/#yolov4_head","title":"yolov4_head","text":""},{"location":"reference/models/#yolov5_head","title":"yolov5_head","text":""},{"location":"reference/models/#yolov7_head","title":"yolov7_head","text":""},{"location":"reference/models/#yolov8_head","title":"yolov8_head","text":""},{"location":"reference/models/#yolox_head","title":"yolox_head","text":""},{"location":"reference/models/#initializer","title":"initializer","text":""},{"location":"reference/models/#focal_loss","title":"focal_loss","text":""},{"location":"reference/models/#iou_loss","title":"iou_loss","text":""},{"location":"reference/models/#loss_factory","title":"loss_factory","text":""},{"location":"reference/models/#yolov3_loss","title":"yolov3_loss","text":""},{"location":"reference/models/#yolov4_loss","title":"yolov4_loss","text":""},{"location":"reference/models/#yolov5_loss","title":"yolov5_loss","text":""},{"location":"reference/models/#yolov7_loss","title":"yolov7_loss","text":""},{"location":"reference/models/#yolov8_loss","title":"yolov8_loss","text":""},{"location":"reference/models/#yolox_loss","title":"yolox_loss","text":""},{"location":"reference/models/#yolov3","title":"yolov3","text":""},{"location":"reference/models/#yolov4","title":"yolov4","text":""},{"location":"reference/models/#yolov5","title":"yolov5","text":""},{"location":"reference/models/#yolov7","title":"yolov7","text":""},{"location":"reference/models/#yolov8","title":"yolov8","text":""},{"location":"reference/models/#yolox","title":"yolox","text":""},{"location":"tutorials/configuration/","title":"Configuration","text":""},{"location":"tutorials/configuration/#_1","title":"\u914d\u7f6e","text":"<p>MindYOLO\u5957\u4ef6\u540c\u65f6\u652f\u6301yaml\u6587\u4ef6\u53c2\u6570\u548c\u547d\u4ee4\u884c\u53c2\u6570\u89e3\u6790\uff0c\u5e76\u5c06\u76f8\u5bf9\u56fa\u5b9a\u3001\u4e0e\u6a21\u578b\u5f3a\u76f8\u5173\u3001\u8f83\u4e3a\u590d\u6742\u6216\u8005\u542b\u6709\u5d4c\u5957\u7ed3\u6784\u7684\u53c2\u6570\u7f16\u5199\u6210yaml\u6587\u4ef6\uff0c\u9700\u6839\u636e\u5b9e\u9645\u5e94\u7528\u573a\u666f\u66f4\u6539\u6216\u8005\u8f83\u4e3a\u7b80\u5355\u7684\u53c2\u6570\u5219\u901a\u8fc7\u547d\u4ee4\u884c\u4f20\u5165\u3002</p> <p>\u4e0b\u9762\u4ee5yolov3\u4e3a\u4f8b\uff0c\u89e3\u91ca\u5982\u4f55\u914d\u7f6e\u76f8\u5e94\u7684\u53c2\u6570\u3002</p>"},{"location":"tutorials/configuration/#_2","title":"\u53c2\u6570\u7ee7\u627f\u5173\u7cfb","text":"<p>\u53c2\u6570\u4f18\u5148\u7ea7\u7531\u9ad8\u5230\u4f4e\u5982\u4e0b\uff0c\u51fa\u73b0\u540c\u540d\u53c2\u6570\u65f6\uff0c\u4f4e\u4f18\u5148\u7ea7\u53c2\u6570\u4f1a\u88ab\u9ad8\u4f18\u5148\u7ea7\u53c2\u6570\u8986\u76d6</p> <ul> <li>\u7528\u6237\u547d\u4ee4\u884c\u4f20\u5165\u53c2\u6570</li> <li>python\u6267\u884cpy\u6587\u4ef6\u4e2dparser\u7684\u9ed8\u8ba4\u53c2\u6570</li> <li>\u547d\u4ee4\u884c\u4f20\u5165config\u53c2\u6570\u5bf9\u5e94\u7684yaml\u6587\u4ef6\u53c2\u6570</li> <li>\u547d\u4ee4\u884c\u4f20\u5165config\u53c2\u6570\u5bf9\u5e94\u7684yaml\u6587\u4ef6\u4e2d__BASE__\u53c2\u6570\u4e2d\u5305\u542b\u7684yaml\u6587\u4ef6\u53c2\u6570\uff0c\u4f8b\u5982yolov3.yaml\u542b\u6709\u5982\u4e0b\u53c2\u6570\uff1a <pre><code>__BASE__: [\n'../coco.yaml',\n'./hyp.scratch.yaml',\n]\n</code></pre></li> </ul>"},{"location":"tutorials/configuration/#_3","title":"\u57fa\u7840\u53c2\u6570","text":""},{"location":"tutorials/configuration/#_4","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>device_target: \u6240\u7528\u8bbe\u5907\uff0cAscend/GPU/CPU</li> <li>save_dir: \u8fd0\u884c\u7ed3\u679c\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e3a./runs</li> <li>log_interval: \u6253\u5370\u65e5\u5fd7step\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a100</li> <li>is_parallel: \u662f\u5426\u5206\u5e03\u5f0f\u8bad\u7ec3\uff0c\u9ed8\u8ba4\u4e3aFalse</li> <li>ms_mode: \u4f7f\u7528\u9759\u6001\u56fe\u6a21\u5f0f(0)\u6216\u52a8\u6001\u56fe\u6a21\u5f0f(1)\uff0c\u9ed8\u8ba4\u4e3a0\u3002</li> <li>config: yaml\u914d\u7f6e\u6587\u4ef6\u8def\u5f84</li> <li>per_batch_size: \u6bcf\u5f20\u5361batch size\uff0c\u9ed8\u8ba4\u4e3a32</li> <li>epochs: \u8bad\u7ec3epoch\u6570\uff0c\u9ed8\u8ba4\u4e3a300</li> <li>...</li> </ul>"},{"location":"tutorials/configuration/#parse","title":"parse\u53c2\u6570\u8bbe\u7f6e","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u901a\u5e38\u7531\u547d\u4ee4\u884c\u4f20\u5165\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>mpirun --allow-run-as-root -n 8 python train.py --config ./configs/yolov7/yolov7.yaml  --is_parallel True --log_interval 50\n</code></pre>"},{"location":"tutorials/configuration/#_5","title":"\u6570\u636e\u96c6","text":""},{"location":"tutorials/configuration/#_6","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>dataset_name: \u6570\u636e\u96c6\u540d\u79f0</li> <li>train_set: \u8bad\u7ec3\u96c6\u6240\u5728\u8def\u5f84</li> <li>val_set: \u9a8c\u8bc1\u96c6\u6240\u5728\u8def\u5f84</li> <li>test_set: \u6d4b\u8bd5\u96c6\u6240\u5728\u8def\u5f84</li> <li>nc: \u6570\u636e\u96c6\u7c7b\u522b\u6570</li> <li>names: \u7c7b\u522b\u540d\u79f0</li> <li>...</li> </ul>"},{"location":"tutorials/configuration/#yaml","title":"yaml\u6587\u4ef6\u6837\u4f8b","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u5728configs/coco.yaml\u4e2d\u5b9a\u4e49\uff0c\u901a\u5e38\u9700\u4fee\u6539\u5176\u4e2d\u7684\u6570\u636e\u96c6\u8def\u5f84</p> <p>```yaml data:   dataset_name: coco</p> <p>train_set: ./coco/train2017.txt  # 118287 images   val_set: ./coco/val2017.txt  # 5000 images   test_set: ./coco/test-dev2017.txt  # 20288 of 40670 images, submit to https://competitions.codalab.org/competitions/20794</p> <p>nc: 80</p> <p># class names   names: [ 'person', 'bicycle', 'car', 'motorcycle', 'airplane', 'bus', 'train', 'truck', 'boat', 'traffic light',            'fire hydrant', 'stop sign', 'parking meter', 'bench', 'bird', 'cat', 'dog', 'horse', 'sheep', 'cow',            'elephant', 'bear', 'zebra', 'giraffe', 'backpack', 'umbrella', 'handbag', 'tie', 'suitcase', 'frisbee',            'skis', 'snowboard', 'sports ball', 'kite', 'baseball bat', 'baseball glove', 'skateboard', 'surfboard',            'tennis racket', 'bottle', 'wine glass', 'cup', 'fork', 'knife', 'spoon', 'bowl', 'banana', 'apple',            'sandwich', 'orange', 'broccoli', 'carrot', 'hot dog', 'pizza', 'donut', 'cake', 'chair', 'couch',            'potted plant', 'bed', 'dining table', 'toilet', 'tv', 'laptop', 'mouse', 'remote', 'keyboard', 'cell phone',            'microwave', 'oven', 'toaster', 'sink', 'refrigerator', 'book', 'clock', 'vase', 'scissors', 'teddy bear',            'hair drier', 'toothbrush' ]  ```</p>"},{"location":"tutorials/configuration/#_7","title":"\u6570\u636e\u589e\u5f3a","text":""},{"location":"tutorials/configuration/#_8","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>num_parallel_workers: \u8bfb\u53d6\u6570\u636e\u7684\u5de5\u4f5c\u8fdb\u7a0b\u6570</li> <li>train_transformers: \u8bad\u7ec3\u8fc7\u7a0b\u6570\u636e\u589e\u5f3a</li> <li>test_transformers: \u9a8c\u8bc1\u8fc7\u7a0b\u6570\u636e\u589e\u5f3a</li> <li>...</li> </ul>"},{"location":"tutorials/configuration/#yaml_1","title":"yaml\u6587\u4ef6\u6837\u4f8b","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u5728configs/yolov3/hyp.scratch.yaml\u4e2d\u5b9a\u4e49\uff0c\u5176\u4e2dtrain_transformers\u548ctest_transformers\u5747\u4e3a\u7531\u5b57\u5178\u7ec4\u6210\u7684\u5217\u8868\uff0c\u5404\u5b57\u5178\u5305\u542b\u6570\u636e\u589e\u5f3a\u64cd\u4f5c\u540d\u79f0\u3001\u53d1\u751f\u6982\u7387\u53ca\u8be5\u589e\u5f3a\u65b9\u6cd5\u76f8\u5173\u7684\u53c2\u6570</p> <p>```yaml data:   num_parallel_workers: 4</p> <p>train_transforms:     - { func_name: mosaic, prob: 1.0, mosaic9_prob: 0.0, translate: 0.1, scale: 0.9 }     - { func_name: mixup, prob: 0.1, alpha: 8.0, beta: 8.0, needed_mosaic: True }     - { func_name: hsv_augment, prob: 1.0, hgain: 0.015, sgain: 0.7, vgain: 0.4 }     - { func_name: label_norm, xyxy2xywh_: True }     - { func_name: albumentations }     - { func_name: fliplr, prob: 0.5 }     - { func_name: label_pad, padding_size: 160, padding_value: -1 }     - { func_name: image_norm, scale: 255. }     - { func_name: image_transpose, bgr2rgb: True, hwc2chw: True }</p> <p>test_transforms:     - { func_name: letterbox, scaleup: False }     - { func_name: label_norm, xyxy2xywh_: True }     - { func_name: label_pad, padding_size: 160, padding_value: -1 }     - { func_name: image_norm, scale: 255. }     - { func_name: image_transpose, bgr2rgb: True, hwc2chw: True }   ```</p>"},{"location":"tutorials/configuration/#_9","title":"\u6a21\u578b","text":""},{"location":"tutorials/configuration/#_10","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>model_name: \u6a21\u578b\u540d\u79f0</li> <li>depth_multiple: \u6a21\u578b\u6df1\u5ea6\u56e0\u5b50</li> <li>width_multiple: \u6a21\u578b\u5bbd\u5ea6\u56e0\u5b50</li> <li>stride: \u7279\u5f81\u56fe\u4e0b\u91c7\u6837\u500d\u6570</li> <li>anchors: \u9884\u8bbe\u951a\u6846</li> <li>backbone: \u6a21\u578b\u9aa8\u5e72\u7f51\u7edc</li> <li>head: \u6a21\u578b\u68c0\u6d4b\u5934</li> </ul>"},{"location":"tutorials/configuration/#yaml_2","title":"yaml\u6587\u4ef6\u6837\u4f8b","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u5728configs/yolov3/yolov3.yaml\u4e2d\u5b9a\u4e49\uff0c\u6839\u636ebackbon\u548chead\u53c2\u6570\u8fdb\u884c\u7f51\u7edc\u6784\u5efa\uff0c\u53c2\u6570\u4ee5\u5d4c\u5957\u5217\u8868\u7684\u5f62\u5f0f\u5448\u73b0\uff0c\u6bcf\u884c\u4ee3\u8868\u4e00\u5c42\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f \u8f93\u5165\u5c42\u7f16\u53f7(-1\u4ee3\u8868\u4e0a\u4e00\u5c42)\u3001\u6a21\u5757\u91cd\u590d\u6b21\u6570\u3001\u6a21\u5757\u540d\u79f0\u548c\u6a21\u5757\u76f8\u5e94\u53c2\u6570\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u4e0d\u501f\u52a9yaml\u6587\u4ef6\u800c\u76f4\u63a5\u5728py\u6587\u4ef6\u4e2d\u5b9a\u4e49\u548c\u6ce8\u518c\u7f51\u7edc\u3002 ```yaml network:   model_name: yolov3</p> <p>depth_multiple: 1.0  # model depth multiple   width_multiple: 1.0  # layer channel multiple   stride: [8, 16, 32]   anchors:     - [10,13, 16,30, 33,23]  # P\u215c     - [30,61, 62,45, 59,119]  # P4/16     - [116,90, 156,198, 373,326]  # P5/32</p> <p># darknet53 backbone   backbone:     # [from, number, module, args]     [[-1, 1, ConvNormAct, [32, 3, 1]],  # 0      [-1, 1, ConvNormAct, [64, 3, 2]],  # 1-P\u00bd      [-1, 1, Bottleneck, [64]],      [-1, 1, ConvNormAct, [128, 3, 2]],  # 3-P2/4      [-1, 2, Bottleneck, [128]],      [-1, 1, ConvNormAct, [256, 3, 2]],  # 5-P\u215c      [-1, 8, Bottleneck, [256]],      [-1, 1, ConvNormAct, [512, 3, 2]],  # 7-P4/16      [-1, 8, Bottleneck, [512]],      [-1, 1, ConvNormAct, [1024, 3, 2]],  # 9-P5/32      [-1, 4, Bottleneck, [1024]],  # 10     ]</p> <p># YOLOv3 head   head:     [[-1, 1, Bottleneck, [1024, False]],      [-1, 1, ConvNormAct, [512, 1, 1]],      [-1, 1, ConvNormAct, [1024, 3, 1]],      [-1, 1, ConvNormAct, [512, 1, 1]],      [-1, 1, ConvNormAct, [1024, 3, 1]],  # 15 (P5/32-large)</p> <pre><code> [-2, 1, ConvNormAct, [256, 1, 1]],\n [-1, 1, Upsample, [None, 2, 'nearest']],\n [[-1, 8], 1, Concat, [1]],  # cat backbone P4\n [-1, 1, Bottleneck, [512, False]],\n [-1, 1, Bottleneck, [512, False]],\n [-1, 1, ConvNormAct, [256, 1, 1]],\n [-1, 1, ConvNormAct, [512, 3, 1]],  # 22 (P4/16-medium)\n\n [-2, 1, ConvNormAct, [128, 1, 1]],\n [-1, 1, Upsample, [None, 2, 'nearest']],\n [[-1, 6], 1, Concat, [1]],  # cat backbone P3\n [-1, 1, Bottleneck, [256, False]],\n [-1, 2, Bottleneck, [256, False]],  # 27 (P3/8-small)\n\n [[27, 22, 15], 1, YOLOv3Head, [nc, anchors, stride]],   # Detect(P3, P4, P5)\n]\n</code></pre> <p>```</p>"},{"location":"tutorials/configuration/#_11","title":"\u635f\u5931\u51fd\u6570","text":""},{"location":"tutorials/configuration/#_12","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>name: \u635f\u5931\u51fd\u6570\u540d\u79f0</li> <li>box: box\u635f\u5931\u6743\u91cd</li> <li>cls: class\u635f\u5931\u6743\u91cd</li> <li>cls_pw: class\u635f\u5931\u6b63\u6837\u672c\u6743\u91cd</li> <li>obj: object\u635f\u5931\u6743\u91cd</li> <li>obj_pw: object\u635f\u5931\u6b63\u6837\u672c\u6743\u91cd</li> <li>fl_gamma: focal loss gamma</li> <li>anchor_t: anchor shape\u6bd4\u4f8b\u9608\u503c</li> <li>label_smoothing: \u6807\u7b7e\u5e73\u6ed1\u503c</li> </ul>"},{"location":"tutorials/configuration/#yaml_3","title":"yaml\u6587\u4ef6\u6837\u4f8b","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u5728configs/yolov3/hyp.scratch.yaml\u4e2d\u5b9a\u4e49</p> <p><code>yaml loss:   name: YOLOv7Loss   box: 0.05  # box loss gain   cls: 0.5  # cls loss gain   cls_pw: 1.0  # cls BCELoss positive_weight   obj: 1.0  # obj loss gain (scale with pixels)   obj_pw: 1.0  # obj BCELoss positive_weight   fl_gamma: 0.0  # focal loss gamma (efficientDet default gamma=1.5)   anchor_t: 4.0  # anchor-multiple threshold   label_smoothing: 0.0 # label smoothing epsilon</code></p>"},{"location":"tutorials/configuration/#_13","title":"\u4f18\u5316\u5668","text":""},{"location":"tutorials/configuration/#_14","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li>optimizer: \u4f18\u5316\u5668\u540d\u79f0\u3002</li> <li>lr_init: \u5b66\u4e60\u7387\u521d\u59cb\u503c</li> <li>warmup_epochs: warmup epoch\u6570</li> <li>warmup_momentum: warmup momentum\u521d\u59cb\u503c</li> <li>warmup_bias_lr: warmup bias\u5b66\u4e60\u7387\u521d\u59cb\u503c</li> <li>min_warmup_step: \u6700\u5c0fwarmup step\u6570</li> <li>group_param: \u53c2\u6570\u5206\u7ec4\u7b56\u7565</li> <li>gp_weight_decay: \u5206\u7ec4\u53c2\u6570\u6743\u91cd\u8870\u51cf\u7cfb\u6570</li> <li>start_factor: \u521d\u59cb\u5b66\u4e60\u7387\u56e0\u6570</li> <li>end_factor: \u7ed3\u675f\u5b66\u4e60\u7387\u56e0\u6570</li> <li>momentum\uff1a\u79fb\u52a8\u5e73\u5747\u7684\u52a8\u91cf</li> <li>loss_scale\uff1aloss\u7f29\u653e\u7cfb\u6570</li> <li>nesterov\uff1a\u662f\u5426\u4f7f\u7528Nesterov Accelerated Gradient (NAG)\u7b97\u6cd5\u66f4\u65b0\u68af\u5ea6\u3002</li> </ul>"},{"location":"tutorials/configuration/#yaml_4","title":"yaml\u6587\u4ef6\u6837\u4f8b","text":"<p>\u8be5\u90e8\u5206\u53c2\u6570\u5728configs/yolov3/hyp.scratch.yaml\u4e2d\u5b9a\u4e49\uff0c\u5982\u4e0b\u793a\u4f8b\u4e2d\u7ecf\u8fc7warmup\u9636\u6bb5\u540e\u7684\u521d\u59cb\u5b66\u4e60\u7387\u4e3alr_init * start_factor = 0.01 * 1.0 = 0.01, \u6700\u7ec8\u5b66\u4e60\u7387\u4e3alr_init * end_factor = 0.01 * 0.01 = 0.0001</p> <p><code>yaml optimizer:   optimizer: momentum   lr_init: 0.01  # initial learning rate (SGD=1E-2, Adam=1E-3)   momentum: 0.937  # SGD momentum/Adam beta1   nesterov: True # update gradients with NAG(Nesterov Accelerated Gradient) algorithm   loss_scale: 1.0 # loss scale for optimizer   warmup_epochs: 3  # warmup epochs (fractions ok)   warmup_momentum: 0.8  # warmup initial momentum   warmup_bias_lr: 0.1  # warmup initial bias lr   min_warmup_step: 1000 # minimum warmup step   group_param: yolov7 # group param strategy   gp_weight_decay: 0.0005  # group param weight decay 5e-4   start_factor: 1.0   end_factor: 0.01</code></p>"},{"location":"tutorials/deployment/","title":"Deployment","text":""},{"location":"tutorials/deployment/#mindyolo","title":"MindYOLO\u90e8\u7f72","text":""},{"location":"tutorials/deployment/#_1","title":"\u4f9d\u8d56","text":"<pre><code>pip install -r requirement.txt\n</code></pre>"},{"location":"tutorials/deployment/#mindspore-lite","title":"MindSpore Lite\u73af\u5883\u51c6\u5907","text":"<p>\u53c2\u8003\uff1aLite\u73af\u5883\u914d\u7f6e     \u6ce8\u610f\uff1aMindSpore Lite\u9002\u914d\u7684python\u73af\u5883\u4e3a3.7\uff0c\u8bf7\u5728\u5b89\u88c5Lite\u524d\u51c6\u5907\u597dpython3.7\u7684\u73af\u5883     1. \u6839\u636e\u73af\u5883\uff0c\u4e0b\u8f7d\u914d\u5957\u7684tar.gz\u5305\u548cwhl\u5305    2. \u89e3\u538btar.gz\u5305\u5e76\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684whl\u5305    <pre><code>tar -zxvf mindspore_lite-2.0.0a0-cp37-cp37m-{os}_{platform}_64.tar.gz\npip install mindspore_lite-2.0.0a0-cp37-cp37m-{os}_{platform}_64.whl\n</code></pre>    3. \u914d\u7f6eLite\u7684\u73af\u5883\u53d8\u91cf    LITE_HOME\u4e3atar.gz\u89e3\u538b\u51fa\u7684\u6587\u4ef6\u5939\u8def\u5f84\uff0c\u63a8\u8350\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84    <pre><code>export LITE_HOME=/path/to/mindspore-lite-{version}-{os}-{platform}\nexport LD_LIBRARY_PATH=$LITE_HOME/runtime/lib:$LITE_HOME/tools/converter/lib:$LD_LIBRARY_PATH\nexport PATH=$LITE_HOME/tools/converter/converter:$LITE_HOME/tools/benchmark:$PATH\n</code></pre></p>"},{"location":"tutorials/deployment/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"tutorials/deployment/#_3","title":"\u6a21\u578b\u8f6c\u6362","text":"<p>ckpt\u6a21\u578b\u8f6c\u4e3amindir\u6a21\u578b\uff0c\u6b64\u6b65\u9aa4\u53ef\u5728CPU/Ascend910\u4e0a\u8fd0\u884c    <pre><code>python ./deploy/export.py --config ./path_to_config/model.yaml --weight ./path_to_ckpt/weight.ckpt --per_batch_size 1 --file_format MINDIR --device_target [CPU/Ascend]\ne.g.\n# \u5728CPU\u4e0a\u8fd0\u884c\npython ./deploy/export.py --config ./configs/yolov5/yolov5n.yaml --weight yolov5n_300e_mAP273-9b16bd7b.ckpt --per_batch_size 1 --file_format MINDIR --device_target CPU\n# \u5728Ascend\u4e0a\u8fd0\u884c\npython ./deploy/export.py --config ./configs/yolov5/yolov5n.yaml --weight yolov5n_300e_mAP273-9b16bd7b.ckpt --per_batch_size 1 --file_format MINDIR --device_target Ascend\n</code></pre></p>"},{"location":"tutorials/deployment/#lite-test","title":"Lite Test","text":"<pre><code>python deploy/test.py --model_type Lite --model_path ./path_to_mindir/weight.mindir --config ./path_to_config/yolo.yaml\ne.g.\npython deploy/test.py --model_type Lite --model_path ./yolov5n.mindir --config ./configs/yolov5/yolov5n.yaml\n</code></pre>"},{"location":"tutorials/deployment/#lite-predict","title":"Lite Predict","text":"<pre><code>python ./deploy/predict.py --model_type Lite --model_path ./path_to_mindir/weight.mindir --config ./path_to_conifg/yolo.yaml --image_path ./path_to_image/image.jpg\ne.g.\npython deploy/predict.py --model_type Lite --model_path ./yolov5n.mindir --config ./configs/yolov5/yolov5n.yaml --image_path ./coco/image/val2017/image.jpg\n</code></pre>"},{"location":"tutorials/deployment/#_4","title":"\u811a\u672c\u8bf4\u660e","text":"<ul> <li>predict.py \u652f\u6301\u5355\u5f20\u56fe\u7247\u63a8\u7406</li> <li>test.py \u652f\u6301COCO\u6570\u636e\u96c6\u63a8\u7406</li> <li>\u6ce8\u610f\uff1a\u5f53\u524d\u53ea\u652f\u6301\u5728Ascend 310\u4e0a\u63a8\u7406</li> </ul>"},{"location":"tutorials/deployment/#mindx","title":"MindX\u90e8\u7f72","text":"<p>\u67e5\u770b MINDX</p>"},{"location":"tutorials/deployment/#mindir","title":"MindIR\u90e8\u7f72","text":"<p>\u67e5\u770b MINDIR</p>"},{"location":"tutorials/deployment/#onnx","title":"ONNX\u90e8\u7f72","text":"<p>\u6ce8\u610f: \u4ec5\u90e8\u5206\u6a21\u578b\u652f\u6301\u5bfc\u51faONNX\u5e76\u4f7f\u7528ONNXRuntime\u8fdb\u884c\u90e8\u7f72 \u67e5\u770b ONNX</p>"},{"location":"tutorials/deployment/#_5","title":"\u6807\u51c6\u548c\u652f\u6301\u7684\u6a21\u578b\u5e93","text":"<ul> <li> YOLOv7</li> <li> YOLOv5</li> <li> YOLOv3</li> <li> YOLOv8</li> <li> YOLOv4</li> <li> YOLOX</li> </ul> Name Scale Context ImageSize Dataset Box mAP (%) Params FLOPs Recipe Download YOLOv8 N D310x1-G 640 MS COCO 2017 37.2 3.2M 8.7G yaml ckpt mindir YOLOv8 S D310x1-G 640 MS COCO 2017 44.6 11.2M 28.6G yaml ckpt mindir YOLOv8 M D310x1-G 640 MS COCO 2017 50.5 25.9M 78.9G yaml ckpt mindir YOLOv8 L D310x1-G 640 MS COCO 2017 52.8 43.7M 165.2G yaml ckpt mindir YOLOv8 X D310x1-G 640 MS COCO 2017 53.7 68.2M 257.8G yaml ckpt mindir YOLOv7 Tiny D310x1-G 640 MS COCO 2017 37.5 6.2M 13.8G yaml ckpt mindir YOLOv7 L D310x1-G 640 MS COCO 2017 50.8 36.9M 104.7G yaml ckpt mindir YOLOv7 X D310x1-G 640 MS COCO 2017 52.4 71.3M 189.9G yaml ckpt mindir YOLOv5 N D310x1-G 640 MS COCO 2017 27.3 1.9M 4.5G yaml ckpt mindir YOLOv5 S D310x1-G 640 MS COCO 2017 37.6 7.2M 16.5G yaml ckpt mindir YOLOv5 M D310x1-G 640 MS COCO 2017 44.9 21.2M 49.0G yaml ckpt mindir YOLOv5 L D310x1-G 640 MS COCO 2017 48.5 46.5M 109.1G yaml ckpt mindir YOLOv5 X D310x1-G 640 MS COCO 2017 50.5 86.7M 205.7G yaml ckpt mindir YOLOv4 CSPDarknet53 D310x1-G 608 MS COCO 2017 45.4 27.6M 52G yaml ckpt mindir YOLOv4 CSPDarknet53(silu) D310x1-G 640 MS COCO 2017 45.8 27.6M 52G yaml ckpt mindir YOLOv3 Darknet53 D310x1-G 640 MS COCO 2017 45.5 61.9M 156.4G yaml ckpt mindir YOLOX N D310x1-G 416 MS COCO 2017 24.1 0.9M 1.1G yaml ckpt mindir YOLOX Tiny D310x1-G 416 MS COCO 2017 33.3 5.1M 6.5G yaml ckpt mindir YOLOX S D310x1-G 640 MS COCO 2017 40.7 9.0M 26.8G yaml ckpt mindir YOLOX M D310x1-G 640 MS COCO 2017 46.7 25.3M 73.8G yaml ckpt mindir YOLOX L D310x1-G 640 MS COCO 2017 49.2 54.2M 155.6G yaml ckpt mindir YOLOX X D310x1-G 640 MS COCO 2017 51.6 99.1M 281.9G yaml ckpt mindir YOLOX Darknet53 D310x1-G 640 MS COCO 2017 47.7 63.7M 185.3G yaml ckpt mindir"},{"location":"tutorials/finetune/","title":"Finetune","text":""},{"location":"tutorials/finetune/#finetune_1","title":"\u81ea\u5b9a\u4e49\u6570\u636e\u96c6finetune\u6d41\u7a0b","text":"<p>\u672c\u6587\u4ee5\u5b89\u5168\u5e3d\u4f69\u6234\u68c0\u6d4b\u6570\u636e\u96c6(SHWD)\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u5728MindYOLO\u4e0a\u8fdb\u884cfinetune\u7684\u4e3b\u8981\u6d41\u7a0b\u3002</p>"},{"location":"tutorials/finetune/#_1","title":"\u6570\u636e\u96c6\u683c\u5f0f\u8f6c\u6362","text":"<p>SHWD\u6570\u636e\u96c6\u91c7\u7528voc\u683c\u5f0f\u7684\u6570\u636e\u6807\u6ce8\uff0c\u5176\u6587\u4ef6\u76ee\u5f55\u5982\u4e0b\u6240\u793a\uff1a <pre><code>             ROOT_DIR\n                \u251c\u2500\u2500 Annotations\n                \u2502        \u251c\u2500\u2500 000000.xml\n                \u2502        \u2514\u2500\u2500 000002.xml\n                \u251c\u2500\u2500 ImageSets\n                \u2502       \u2514\u2500\u2500 Main\n                \u2502             \u251c\u2500\u2500 test.txt\n                \u2502             \u251c\u2500\u2500 train.txt\n                \u2502             \u251c\u2500\u2500 trainval.txt\n                \u2502             \u2514\u2500\u2500 val.txt\n                \u2514\u2500\u2500 JPEGImages\n                        \u251c\u2500\u2500 000000.jpg\n                        \u2514\u2500\u2500 000002.jpg\n</code></pre> Annotations\u6587\u4ef6\u5939\u4e0b\u7684xml\u6587\u4ef6\u4e3a\u6bcf\u5f20\u56fe\u7247\u7684\u6807\u6ce8\u4fe1\u606f\uff0c\u4e3b\u8981\u5185\u5bb9\u5982\u4e0b\uff1a <pre><code>&lt;annotation&gt;\n  &lt;folder&gt;JPEGImages&lt;/folder&gt;\n  &lt;filename&gt;000377.jpg&lt;/filename&gt;\n  &lt;path&gt;F:\\baidu\\VOC2028\\JPEGImages\\000377.jpg&lt;/path&gt;\n  &lt;source&gt;\n    &lt;database&gt;Unknown&lt;/database&gt;\n  &lt;/source&gt;\n  &lt;size&gt;\n    &lt;width&gt;750&lt;/width&gt;\n    &lt;height&gt;558&lt;/height&gt;\n    &lt;depth&gt;3&lt;/depth&gt;\n  &lt;/size&gt;\n  &lt;segmented&gt;0&lt;/segmented&gt;\n  &lt;object&gt;\n    &lt;name&gt;hat&lt;/name&gt;\n    &lt;pose&gt;Unspecified&lt;/pose&gt;\n    &lt;truncated&gt;0&lt;/truncated&gt;\n    &lt;difficult&gt;0&lt;/difficult&gt;\n    &lt;bndbox&gt;\n      &lt;xmin&gt;142&lt;/xmin&gt;\n      &lt;ymin&gt;388&lt;/ymin&gt;\n      &lt;xmax&gt;177&lt;/xmax&gt;\n      &lt;ymax&gt;426&lt;/ymax&gt;\n    &lt;/bndbox&gt;\n  &lt;/object&gt;\n</code></pre> \u5176\u4e2d\u5305\u542b\u591a\u4e2aobject, object\u4e2d\u7684name\u4e3a\u7c7b\u522b\u540d\u79f0\uff0cxmin, ymin, xmax, ymax\u5219\u4e3a\u68c0\u6d4b\u6846\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u5750\u6807\u3002</p> <p>MindYOLO\u652f\u6301\u7684\u6570\u636e\u96c6\u683c\u5f0f\u4e3aYOLO\u683c\u5f0f\uff0c\u8be6\u60c5\u53ef\u53c2\u8003\u6570\u636e\u51c6\u5907</p> <p>\u7531\u4e8eMindYOLO\u5728\u9a8c\u8bc1\u9636\u6bb5\u9009\u7528\u56fe\u7247\u540d\u79f0\u4f5c\u4e3aimage_id\uff0c\u56e0\u6b64\u56fe\u7247\u540d\u79f0\u53ea\u80fd\u4e3a\u6570\u503c\u7c7b\u578b\uff0c\u800c\u4e0d\u80fd\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u5bf9\u56fe\u7247\u8fdb\u884c\u6539\u540d\u3002\u5bf9SHWD\u6570\u636e\u96c6\u683c\u5f0f\u7684\u8f6c\u6362\u5305\u542b\u5982\u4e0b\u6b65\u9aa4\uff1a * \u5c06\u56fe\u7247\u590d\u5236\u5230\u76f8\u5e94\u7684\u8def\u5f84\u4e0b\u5e76\u6539\u540d * \u5728\u6839\u76ee\u5f55\u4e0b\u76f8\u5e94\u7684txt\u6587\u4ef6\u4e2d\u5199\u5165\u8be5\u56fe\u7247\u7684\u76f8\u5bf9\u8def\u5f84 * \u89e3\u6790xml\u6587\u4ef6\uff0c\u5728\u76f8\u5e94\u8def\u5f84\u4e0b\u751f\u6210\u5bf9\u5e94\u7684txt\u6807\u6ce8\u6587\u4ef6 * \u9a8c\u8bc1\u96c6\u8fd8\u9700\u751f\u6210\u6700\u7ec8\u7684json\u6587\u4ef6</p> <p>\u8be6\u7ec6\u5b9e\u73b0\u53ef\u53c2\u8003convert_shwd2yolo.py\uff0c\u8fd0\u884c\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <p><pre><code>python examples/finetune_SHWD/convert_shwd2yolo.py --root_dir /path_to_shwd/SHWD\n</code></pre> \u8fd0\u884c\u4ee5\u4e0a\u547d\u4ee4\u5c06\u5728\u4e0d\u6539\u53d8\u539f\u6570\u636e\u96c6\u7684\u524d\u63d0\u4e0b\uff0c\u5728\u540c\u7ea7\u76ee\u5f55\u751f\u6210yolo\u683c\u5f0f\u7684SHWD\u6570\u636e\u96c6\u3002</p>"},{"location":"tutorials/finetune/#yaml","title":"\u7f16\u5199yaml\u914d\u7f6e\u6587\u4ef6","text":"<p>\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u5305\u542b\u6570\u636e\u96c6\u3001\u6570\u636e\u589e\u5f3a\u3001loss\u3001optimizer\u3001\u6a21\u578b\u7ed3\u6784\u6d89\u53ca\u7684\u76f8\u5e94\u53c2\u6570\uff0c\u7531\u4e8eMindYOLO\u63d0\u4f9byaml\u6587\u4ef6\u7ee7\u627f\u673a\u5236\uff0c\u53ef\u53ea\u5c06\u9700\u8981\u8c03\u6574\u7684\u53c2\u6570\u7f16\u5199\u4e3ayolov7-tiny_shwd.yaml\uff0c\u5e76\u7ee7\u627fMindYOLO\u63d0\u4f9b\u7684\u539f\u751fyaml\u6587\u4ef6\u5373\u53ef\uff0c\u5176\u5185\u5bb9\u5982\u4e0b\uff1a <pre><code>__BASE__: [\n  '../../configs/yolov7/yolov7-tiny.yaml',\n]\n\nper_batch_size: 16 # \u5355\u5361batchsize\uff0c\u603b\u7684batchsize=per_batch_size * device_num\nimg_size: 640 # image sizes\nweight: ./yolov7-tiny_pretrain.ckpt\nstrict_load: False # \u662f\u5426\u6309\u4e25\u683c\u52a0\u8f7dckpt\u5185\u53c2\u6570\uff0c\u9ed8\u8ba4True\uff0c\u82e5\u8bbe\u6210False\uff0c\u5f53\u5206\u7c7b\u6570\u4e0d\u4e00\u81f4\uff0c\u4e22\u6389\u6700\u540e\u4e00\u5c42\u5206\u7c7b\u5668\u7684weight\nlog_interval: 10 # \u6bcflog_interval\u6b21\u8fed\u4ee3\u6253\u5370\u4e00\u6b21loss\u7ed3\u679c\n\ndata:\n  dataset_name: shwd\n  train_set: ./SHWD/train.txt # \u5b9e\u9645\u8bad\u7ec3\u6570\u636e\u8def\u5f84\n  val_set: ./SHWD/val.txt\n  test_set: ./SHWD/val.txt\n  nc: 2 # \u5206\u7c7b\u6570\n  # class names\n  names: [ 'person',  'hat' ] # \u6bcf\u4e00\u7c7b\u7684\u540d\u5b57\n\noptimizer:\n  lr_init: 0.001  # initial learning rate\n</code></pre> * <code>__BASE__</code>\u4e3a\u4e00\u4e2a\u5217\u8868\uff0c\u8868\u793a\u7ee7\u627f\u7684yaml\u6587\u4ef6\u6240\u5728\u8def\u5f84\uff0c\u53ef\u4ee5\u7ee7\u627f\u591a\u4e2ayaml\u6587\u4ef6 * per_batch_size\u548cimg_size\u5206\u522b\u8868\u793a\u5355\u5361\u4e0a\u7684batch_size\u548c\u6570\u636e\u5904\u7406\u56fe\u7247\u91c7\u7528\u7684\u56fe\u7247\u5c3a\u5bf8 * weight\u4e3a\u4e0a\u8ff0\u63d0\u5230\u7684\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u6587\u4ef6\u8def\u5f84\uff0cstrict_load\u8868\u793a\u4e22\u5f03shape\u4e0d\u4e00\u81f4\u7684\u53c2\u6570 * log_interval\u8868\u793a\u65e5\u5fd7\u6253\u5370\u95f4\u9694 * data\u5b57\u6bb5\u4e0b\u5168\u90e8\u4e3a\u6570\u636e\u96c6\u76f8\u5173\u53c2\u6570\uff0c\u5176\u4e2ddataset_name\u4e3a\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u540d\u79f0\uff0ctrain_set\u3001val_set\u3001test_set\u5206\u522b\u4e3a\u4fdd\u5b58\u8bad\u7ec3\u96c6\u3001\u9a8c\u8bc1\u96c6\u3001\u6d4b\u8bd5\u96c6\u56fe\u7247\u8def\u5f84\u7684txt\u6587\u4ef6\u8def\u5f84\uff0cnc\u4e3a\u7c7b\u522b\u6570\u91cf\uff0cnames\u4e3a\u7c7b\u522b\u540d\u79f0 * optimizer\u5b57\u6bb5\u4e0b\u7684lr_init\u4e3a\u7ecf\u8fc7warm_up\u4e4b\u540e\u7684\u521d\u59cb\u5316\u5b66\u4e60\u7387\uff0c\u6b64\u5904\u76f8\u6bd4\u9ed8\u8ba4\u53c2\u6570\u7f29\u5c0f\u4e8610\u500d</p> <p>\u53c2\u6570\u7ee7\u627f\u5173\u7cfb\u548c\u53c2\u6570\u8bf4\u660e\u53ef\u53c2\u8003configuration_CN.md\u3002</p>"},{"location":"tutorials/finetune/#_2","title":"\u4e0b\u8f7d\u9884\u8bad\u7ec3\u6a21\u578b","text":"<p>\u53ef\u9009\u7528MindYOLO\u63d0\u4f9b\u7684MODEL_ZOO\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u7684\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u9884\u8bad\u7ec3\u6a21\u578b\u5728COCO\u6570\u636e\u96c6\u4e0a\u5df2\u7ecf\u6709\u8f83\u597d\u7684\u7cbe\u5ea6\u8868\u73b0\uff0c\u76f8\u6bd4\u4ece\u5934\u8bad\u7ec3\uff0c\u52a0\u8f7d\u9884\u8bad\u7ec3\u6a21\u578b\u4e00\u822c\u4f1a\u62e5\u6709\u66f4\u5feb\u7684\u6536\u655b\u901f\u5ea6\u4ee5\u53ca\u66f4\u9ad8\u7684\u6700\u7ec8\u7cbe\u5ea6\uff0c\u5e76\u4e14\u5927\u6982\u7387\u80fd\u907f\u514d\u521d\u59cb\u5316\u4e0d\u5f53\u5bfc\u81f4\u7684\u68af\u5ea6\u6d88\u5931\u3001\u68af\u5ea6\u7206\u70b8\u7b49\u95ee\u9898\u3002</p> <p>\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u7c7b\u522b\u6570\u901a\u5e38\u4e0eCOCO\u6570\u636e\u96c6\u4e0d\u4e00\u81f4\uff0cMindYOLO\u4e2d\u5404\u6a21\u578b\u7684\u68c0\u6d4b\u5934head\u7ed3\u6784\u8ddf\u6570\u636e\u96c6\u7c7b\u522b\u6570\u6709\u5173\uff0c\u76f4\u63a5\u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u5bfc\u5165\u53ef\u80fd\u4f1a\u56e0\u4e3ashape\u4e0d\u4e00\u81f4\u800c\u5bfc\u5165\u5931\u8d25\uff0c\u53ef\u4ee5\u5728yaml\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6estrict_load\u53c2\u6570\u4e3aFalse\uff0cMindYOLO\u5c06\u81ea\u52a8\u820d\u5f03shape\u4e0d\u4e00\u81f4\u7684\u53c2\u6570\uff0c\u5e76\u629b\u51fa\u8be5module\u53c2\u6570\u5e76\u672a\u5bfc\u5165\u7684\u544a\u8b66</p>"},{"location":"tutorials/finetune/#finetune_2","title":"\u6a21\u578b\u5fae\u8c03(Finetune)","text":"<p>\u6a21\u578b\u5fae\u8c03\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u9996\u5148\u6309\u7167\u9ed8\u8ba4\u914d\u7f6e\u8fdb\u884c\u8bad\u7ec3\uff0c\u5982\u6548\u679c\u4e0d\u4f73\uff0c\u53ef\u8003\u8651\u8c03\u6574\u4ee5\u4e0b\u53c2\u6570\uff1a * \u5b66\u4e60\u7387\u53ef\u8c03\u5c0f\u4e00\u4e9b\uff0c\u9632\u6b62loss\u96be\u4ee5\u6536\u655b * per_batch_size\u53ef\u6839\u636e\u5b9e\u9645\u663e\u5b58\u5360\u7528\u8c03\u6574\uff0c\u901a\u5e38per_batch_size\u8d8a\u5927\uff0c\u68af\u5ea6\u8ba1\u7b97\u8d8a\u7cbe\u786e * epochs\u53ef\u6839\u636eloss\u662f\u5426\u6536\u655b\u8fdb\u884c\u8c03\u6574 * anchor\u53ef\u6839\u636e\u5b9e\u9645\u7269\u4f53\u5927\u5c0f\u8fdb\u884c\u8c03\u6574</p> <p>\u7531\u4e8eSHWD\u8bad\u7ec3\u96c6\u53ea\u6709\u7ea66000\u5f20\u56fe\u7247\uff0c\u9009\u7528yolov7-tiny\u6a21\u578b\u8fdb\u884c\u8bad\u7ec3\u3002 * \u5728\u591a\u5361NPU/GPU\u4e0a\u8fdb\u884c\u5206\u5e03\u5f0f\u6a21\u578b\u8bad\u7ec3\uff0c\u4ee58\u5361\u4e3a\u4f8b:</p> <pre><code>mpirun --allow-run-as-root -n 8 python train.py --config ./examples/finetune_SHWD/yolov7-tiny_shwd.yaml --is_parallel True\n</code></pre> <ul> <li>\u5728\u5355\u5361NPU/GPU/CPU\u4e0a\u8bad\u7ec3\u6a21\u578b\uff1a</li> </ul> <p><pre><code>python train.py --config ./examples/finetune_SHWD/yolov7-tiny_shwd.yaml </code></pre> \u6ce8\u610f\uff1a\u76f4\u63a5\u7528yolov7-tiny\u9ed8\u8ba4\u53c2\u6570\u5728SHWD\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\uff0c\u53ef\u53d6\u5f97AP50 87.0\u7684\u7cbe\u5ea6\u3002\u5c06lr_init\u53c2\u6570\u75310.01\u6539\u4e3a0.001\uff0c\u5373\u53ef\u5b9e\u73b0ap50\u4e3a89.2\u7684\u7cbe\u5ea6\u7ed3\u679c\u3002</p>"},{"location":"tutorials/finetune/#_3","title":"\u53ef\u89c6\u5316\u63a8\u7406","text":"<p>\u4f7f\u7528/demo/predict.py\u5373\u53ef\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u8fdb\u884c\u53ef\u89c6\u5316\u63a8\u7406\uff0c\u8fd0\u884c\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <p><pre><code>python demo/predict.py --config ./examples/finetune_SHWD/yolov7-tiny_shwd.yaml --weight=/path_to_ckpt/WEIGHT.ckpt --image_path /path_to_image/IMAGE.jpg\n</code></pre> \u63a8\u7406\u6548\u679c\u5982\u4e0b\uff1a</p>"},{"location":"tutorials/modelarts/","title":"Modelarts","text":""},{"location":"tutorials/modelarts/#mindyolo-modelarts","title":"MindYOLO ModelArts\u8bad\u7ec3\u5feb\u901f\u5165\u95e8","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecdMindYOLO\u501f\u52a9ModelArts\u5e73\u53f0\u7684\u8bad\u7ec3\u65b9\u6cd5\u3002 ModelArts\u76f8\u5173\u6559\u7a0b\u53c2\u8003\u5e2e\u52a9\u4e2d\u5fc3</p>"},{"location":"tutorials/modelarts/#_1","title":"\u51c6\u5907\u6570\u636e\u53ca\u4ee3\u7801","text":"<p>\u4f7f\u7528OBS\u670d\u52a1\u4e0a\u4f20\u6570\u636e\u96c6\uff0c\u76f8\u5173\u64cd\u4f5c\u6559\u7a0b\u89c1OBS\u7528\u6237\u6307\u5357\uff0c\u83b7\u53d6\u672c\u8d26\u6237\u7684AK\uff0c\u670d\u52a1\u5668\u5730\u5740\u8bf7\u54a8\u8be2\u5bf9\u5e94\u5e73\u53f0\u7ba1\u7406\u5458\u6216\u8d26\u53f7\u8d1f\u8d23\u4eba\uff0c\u5982AK\u4e0d\u5728\u7528\u6237\u6307\u5357\u6307\u5b9a\u4f4d\u7f6e\uff0c\u4e5f\u8bf7\u54a8\u8be2\u5e73\u53f0\u7ba1\u7406\u5458\u6216\u8d26\u53f7\u8d1f\u8d23\u4eba\u3002 \u64cd\u4f5c\uff1a 1. \u767b\u5f55obs browser+  2. \u521b\u5efa\u6876 -&gt; \u65b0\u5efa\u6587\u4ef6\u5939\uff08\u5982\uff1acoco\uff09  3. \u4e0a\u4f20\u6570\u636e\u6587\u4ef6\uff0c\u8bf7\u5c06\u6570\u636e\u6587\u4ef6\u7edf\u4e00\u5355\u72ec\u653e\u7f6e\u5728\u4e00\u4e2a\u6587\u4ef6\u5939\u5185\uff08\u5373\u7528\u4f8b\u4e2d\u7684coco\uff09\uff0c\u4ee3\u7801\u4e2d\u4f1a\u5bf9obs\u6876\u5185\u6570\u636e\u505a\u62f7\u8d1d\uff0c\u62f7\u8d1d\u5185\u5bb9\u4e3a\u6b64\u6587\u4ef6\u5939\uff08\u5982\uff1acoco\uff09\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u3002\u5982\u672a\u65b0\u5efa\u6587\u4ef6\u5939\uff0c\u5c31\u65e0\u6cd5\u9009\u62e9\u5b8c\u6574\u6570\u636e\u96c6\u3002 </p>"},{"location":"tutorials/modelarts/#_2","title":"\u51c6\u5907\u4ee3\u7801","text":"<p>\u540c\u6837\u4f7f\u7528OBS\u670d\u52a1\u4e0a\u4f20\u8bad\u7ec3\u4ee3\u7801\u3002 \u64cd\u4f5c\uff1a\u521b\u5efa\u6876 -&gt; \u65b0\u5efa\u6587\u4ef6\u5939\uff08\u5982\uff1amindyolo\uff09-&gt; \u4e0a\u4f20\u4ee3\u7801\u6587\u4ef6\uff0c\u5728mindyolo\u540c\u5c42\u7ea7\u4e0b\u521b\u5efaoutput\u6587\u4ef6\u5939\u7528\u4e8e\u5b58\u653e\u8bad\u7ec3\u8bb0\u5f55\uff0c\u521b\u5efalog\u6587\u4ef6\u5939\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u3002  </p>"},{"location":"tutorials/modelarts/#_3","title":"\u65b0\u5efa\u7b97\u6cd5","text":"<ol> <li>\u5728\u9009\u9879\u5361\u4e2d\u9009\u62e9\u7b97\u6cd5\u7ba1\u7406-&gt;\u521b\u5efa\u3002 </li> <li>\u81ea\u5b9a\u4e49\u7b97\u6cd5\u540d\u79f0\uff0c\u9884\u5236\u6846\u67b6\u9009\u62e9Ascend-Powered-Engine\uff0cmaster\u5206\u652f\u8bf7\u9009\u62e9MindSpore-2.0\u7248\u672c\u955c\u50cf\uff0cr0.1\u5206\u652f\u8bf7\u9009\u62e9MindSpore-1.8.1\u7248\u672c\u955c\u50cf\uff0c\u8bbe\u7f6e\u4ee3\u7801\u76ee\u5f55\u3001\u542f\u52a8\u6587\u4ef6\u3001\u8f93\u5165\u3001\u8f93\u51fa\u4ee5\u53ca\u8d85\u53c2\u3002 </li> </ol> <ul> <li>\u5982\u9700\u52a0\u8f7d\u9884\u8bad\u7ec3\u6743\u91cd\uff0c\u53ef\u5728\u9009\u62e9\u6a21\u578b\u4e2d\u9009\u62e9\u5df2\u4e0a\u4f20\u7684\u6a21\u578b\u6587\u4ef6\uff0c\u5e76\u5728\u8fd0\u884c\u53c2\u6570\u4e2d\u589e\u52a0ckpt_dir\u53c2\u6570 </li> <li>\u542f\u52a8\u6587\u4ef6\u4e3atrain.py</li> <li>\u8fd0\u884c\u8d85\u53c2\u9700\u6dfb\u52a0enable_modelarts\uff0c\u503c\u4e3aTrue</li> <li>\u8fd0\u884c\u8d85\u53c2config\u8def\u5f84\u53c2\u8003\u8bad\u7ec3\u4f5c\u4e1a\u4e2d\u8fd0\u884c\u73af\u5883\u9884\u89c8\u7684\u76ee\u5f55\uff0c\u5982/home/ma-user/modelarts/user-job-dir/mindyolo/configs/yolov5/yolov5n.yaml</li> <li>\u5982\u6d89\u53ca\u5206\u5e03\u5f0f\u8bad\u7ec3\u573a\u666f\uff0c\u9700\u589e\u52a0\u8d85\u53c2is_parallel\uff0c\u5e76\u5728\u5206\u5e03\u5f0f\u8fd0\u884c\u65f6\u8bbe\u7f6e\u4e3aTrue\uff0c\u5355\u5361\u65f6\u4e3aFalse</li> </ul>"},{"location":"tutorials/modelarts/#_4","title":"\u65b0\u5efa\u4f5c\u4e1a","text":"<ol> <li>\u5728ModelArts\u670d\u52a1\u4e2d\u9009\u62e9\uff1a\u8bad\u7ec3\u7ba1\u7406 -&gt; \u8bad\u7ec3\u4f5c\u4e1a -&gt; \u521b\u5efa\u8bad\u7ec3\u4f5c\u4e1a\uff0c\u8bbe\u7f6e\u4f5c\u4e1a\u540d\u79f0\uff0c\u9009\u62e9\u4e0d\u7eb3\u5165\u5b9e\u9a8c\uff1b\u521b\u5efa\u65b9\u5f0f-&gt;\u6211\u7684\u7b97\u6cd5\u9009\u62e9\u521a\u624d\u65b0\u5efa\u7684\u7b97\u6cd5\uff1b  </li> <li>\u8bad\u7ec3\u8f93\u5165-&gt;\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u9009\u62e9\u521a\u624d\u521b\u5efa\u7684obs\u6570\u636e\u6876\uff08\u793a\u4f8b\u4e2d\u4e3acoco\uff09\uff0c\u8bad\u7ec3\u8f93\u51fa\u9009\u62e9\u51c6\u5907\u4ee3\u7801\u65f6\u7684output\u6587\u4ef6\u5939\uff0c\u5e76\u6839\u636e\u8fd0\u884c\u73af\u5883\u9884\u89c8\u8bbe\u7f6e\u597dconfig\u8d85\u53c2\u503c; </li> <li>\u9009\u62e9\u8d44\u6e90\u6c60\u3001\u89c4\u683c\u3001\u8ba1\u7b97\u8282\u70b9\uff0c\u4f5c\u4e1a\u65e5\u5fd7\u8def\u5f84\u9009\u62e9\u521b\u5efa\u4ee3\u7801\u65f6\u7684log\u6587\u4ef6\u5939  </li> <li>\u63d0\u4ea4\u8bad\u7ec3\uff0c\u6392\u961f\u540e\u4f1a\u8fdb\u5165\u8fd0\u884c\u4e2d</li> </ol>"},{"location":"tutorials/modelarts/#_5","title":"\u4fee\u6539\u4f5c\u4e1a","text":"<p>\u5728\u8bad\u7ec3\u4f5c\u4e1a\u9875\u9762\u9009\u62e9\u91cd\u5efa\uff0c\u53ef\u4fee\u6539\u9009\u62e9\u7684\u4f5c\u4e1a\u914d\u7f6e</p>"},{"location":"tutorials/quick_start/","title":"Quick Start","text":""},{"location":"tutorials/quick_start/#getting-started-with-mindyolo","title":"Getting Started with MindYOLO","text":"<p>This document provides a brief introduction to the usage of built-in command-line tools in MindYOLO.</p>"},{"location":"tutorials/quick_start/#inference-demo-with-pre-trained-models","title":"Inference Demo with Pre-trained Models","text":"<ol> <li>Pick a model and its config file from the   model zoo,   such as, <code>./configs/yolov7/yolov7.yaml</code>.</li> <li>Download the corresponding pre-trained checkpoint from the model zoo of each model.</li> <li>To run YOLO object detection with the built-in configs, please run:</li> </ol> <pre><code># Run with Ascend (By default)\npython demo/predict.py --config ./configs/yolov7/yolov7.yaml --weight=/path_to_ckpt/WEIGHT.ckpt --image_path /path_to_image/IMAGE.jpg\n\n# Run with GPU\npython demo/predict.py --config ./configs/yolov7/yolov7.yaml --weight=/path_to_ckpt/WEIGHT.ckpt --image_path /path_to_image/IMAGE.jpg --device_target=GPU\n</code></pre> <p>For details of the command line arguments, see <code>demo/predict.py -h</code> or look at its source code to understand their behavior. Some common arguments are: * To run on cpu, modify device_target to CPU. * The results will be saved in <code>./detect_results</code></p>"},{"location":"tutorials/quick_start/#training-evaluation-in-command-line","title":"Training &amp; Evaluation in Command Line","text":"<ul> <li>Prepare your dataset in YOLO format. If trained with COCO (YOLO format), prepare it from yolov5 or the darknet.</li> </ul> <pre><code>  coco/\n    {train,val}2017.txt\n    annotations/\n      instances_{train,val}2017.json\n    images/\n      {train,val}2017/\n          00000001.jpg\n          ...\n          # image files that are mentioned in the corresponding train/val2017.txt\n    labels/\n      {train,val}2017/\n          00000001.txt\n          ...\n          # label files that are mentioned in the corresponding train/val2017.txt\n</code></pre> <ul> <li> <p>To train a model on 8 NPUs/GPUs:   <pre><code>mpirun --allow-run-as-root -n 8 python train.py --config ./configs/yolov7/yolov7.yaml  --is_parallel True\n</code></pre></p> </li> <li> <p>To train a model on 1 NPU/GPU/CPU:   <pre><code>python train.py --config ./configs/yolov7/yolov7.yaml \n</code></pre></p> </li> <li> <p>To evaluate a model's performance on 1 NPU/GPU/CPU:   <pre><code>python test.py --config ./configs/yolov7/yolov7.yaml --weight /path_to_ckpt/WEIGHT.ckpt\n</code></pre></p> </li> <li>To evaluate a model's performance 8 NPUs/GPUs:   <pre><code>mpirun --allow-run-as-root -n 8 python test.py --config ./configs/yolov7/yolov7.yaml --weight /path_to_ckpt/WEIGHT.ckpt --is_parallel True\n</code></pre> Notes: (1) The default hyper-parameter is used for 8-card training, and some parameters need to be adjusted in the case of a single card. (2) The default device is Ascend, and you can modify it by specifying 'device_target' as Ascend/GPU/CPU, as these are currently supported.</li> <li>For more options, see <code>train/test.py -h</code>.</li> </ul>"},{"location":"tutorials/quick_start/#deployment","title":"Deployment","text":"<p>See here.</p>"},{"location":"tutorials/quick_start/#to-use-mindyolo-apis-in-your-code","title":"To use MindYOLO APIs in Your Code","text":"<p>To be supplemented.</p>"},{"location":"zh/","title":"\u4e3b\u9875","text":""},{"location":"zh/#mindyolo","title":"MindYOLO","text":"<p>MindYOLO\u662fMindSpore Lab\u5f00\u53d1\u7684AI\u5957\u4ef6\uff0c\u5b9e\u73b0\u4e86\u6700\u5148\u8fdb\u7684YOLO\u7cfb\u5217\u7b97\u6cd5\uff0c\u67e5\u770b\u652f\u6301\u7684\u6a21\u578b\u7b97\u6cd5\u3002</p> <p>MindYOLO\u4f7f\u7528Python\u8bed\u8a00\u7f16\u5199\uff0c\u57fa\u4e8e MindSpore AI\u6846\u67b6\u5f00\u53d1\u3002</p> <p>master \u5206\u652f\u914d\u5957 MindSpore 2.0\u3002</p> <p></p>"},{"location":"zh/#_1","title":"\u65b0\u7279\u6027","text":"<ul> <li>2023/06/15</li> </ul> <ol> <li>\u652f\u6301 YOLOv3/v4/v5/v7/v8/X \u7b496\u4e2a\u6a21\u578b\uff0c\u53d1\u5e03\u4e8623\u4e2a\u6a21\u578bweights\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003 MODEL ZOO\u3002</li> <li>\u914d\u5957 MindSpore 2.0\u3002</li> <li>\u652f\u6301 MindSpore lite 2.0 \u63a8\u7406\u3002</li> <li>\u65b0\u7684\u6559\u7a0b\u6587\u6863\u4e0a\u7ebf\uff01</li> </ol>"},{"location":"zh/#_2","title":"\u57fa\u51c6\u548c\u6a21\u578b\u4ed3\u5e93","text":"<p>\u67e5\u770b MODEL ZOO.</p> \u652f\u6301\u7684\u7b97\u6cd5 <ul> <li> YOLOv8</li> <li> YOLOv7</li> <li> YOLOX</li> <li> YOLOv5</li> <li> YOLOv4</li> <li> YOLOv3</li> </ul>"},{"location":"zh/#_3","title":"\u5b89\u88c5","text":"<p>\u67e5\u770b INSTALLATION</p>"},{"location":"zh/#_4","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u67e5\u770b GETTING STARTED</p>"},{"location":"zh/#mindyolo_1","title":"\u4e86\u89e3 MindYOLO \u7684\u66f4\u591a\u4fe1\u606f","text":"<p>\u656c\u8bf7\u671f\u5f85</p>"},{"location":"zh/#_5","title":"\u6ce8\u610f","text":"<p>\u26a0\ufe0f\u5f53\u524d\u7248\u672c\u57fa\u4e8eGRAPH\u7684\u9759\u6001Shape\u3002\u540e\u7eed\u5c06\u6dfb\u52a0PYNATIVE\u7684\u52a8\u6001Shape\u652f\u6301\uff0c\u656c\u8bf7\u671f\u5f85\u3002</p>"},{"location":"zh/#_6","title":"\u8d21\u732e\u65b9\u5f0f","text":"<p>\u6211\u4eec\u611f\u8c22\u5f00\u53d1\u8005\u7528\u6237\u7684\u6240\u6709\u8d21\u732e\uff0c\u5305\u62ec\u63d0issue\u548cPR\uff0c\u4e00\u8d77\u8ba9MindYOLO\u53d8\u5f97\u66f4\u597d\u3002</p> <p>\u8d21\u732e\u6307\u5357\u8bf7\u53c2\u8003CONTRIBUTING.md\u3002</p>"},{"location":"zh/#_7","title":"\u8bb8\u53ef\u8bc1","text":"<p>MindYOLO\u9075\u5faaApache License 2.0\u5f00\u6e90\u534f\u8bae\u3002</p>"},{"location":"zh/#_8","title":"\u81f4\u8c22","text":"<p>MindYOLO\u662f\u4e00\u4e2a\u6b22\u8fce\u4efb\u4f55\u8d21\u732e\u548c\u53cd\u9988\u7684\u5f00\u6e90\u9879\u76ee\u3002\u6211\u4eec\u5e0c\u671b\u901a\u8fc7\u63d0\u4f9b\u7075\u6d3b\u4e14\u6807\u51c6\u5316\u7684\u5de5\u5177\u5305\u6765\u91cd\u65b0\u5b9e\u73b0\u73b0\u6709\u65b9\u6cd5\u548c\u5f00\u53d1\u65b0\u7684\u5b9e\u65f6\u76ee\u6807\u68c0\u6d4b\u65b9\u6cd5\uff0c\u4ece\u800c\u4e3a\u4e0d\u65ad\u53d1\u5c55\u7684\u7814\u7a76\u793e\u533a\u670d\u52a1\u3002</p>"},{"location":"zh/#_9","title":"\u5f15\u7528","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97MindYOLO\u5bf9\u4f60\u7684\u9879\u76ee\u6709\u5e2e\u52a9\uff0c\u8bf7\u8003\u8651\u5f15\u7528\uff1a</p> <pre><code>@misc{MindSpore Object Detection YOLO 2023,\n    title={{MindSpore Object Detection YOLO}:MindSpore Object Detection YOLO Toolbox and Benchmark},\n    author={MindSpore YOLO Contributors},\n    howpublished = {\\url{https://github.com/mindspore-lab/mindyolo}},\n    year={2023}\n}\n</code></pre>"},{"location":"zh/installation/","title":"\u5b89\u88c5","text":""},{"location":"zh/installation/#_2","title":"\u4f9d\u8d56","text":"<ul> <li>mindspore &gt;= 2.0</li> <li>numpy &gt;= 1.17.0</li> <li>pyyaml &gt;= 5.3</li> <li>openmpi 4.0.3 (\u5206\u5e03\u5f0f\u8bad\u7ec3\u6240\u9700)</li> </ul> <p>\u4e3a\u4e86\u5b89\u88c5<code>python</code>\u76f8\u5173\u5e93\u4f9d\u8d56\uff0c\u53ea\u9700\u8fd0\u884c\uff1a</p> <pre><code>pip install -r requirements.txt\n</code></pre> <p>MindSpore\u53ef\u4ee5\u901a\u8fc7\u9075\u5faa\u5b98\u65b9\u6307\u5f15\uff0c\u5728\u4e0d\u540c\u7684\u786c\u4ef6\u5e73\u53f0\u4e0a\u83b7\u5f97\u6700\u4f18\u7684\u5b89\u88c5\u4f53\u9a8c\u3002 \u4e3a\u4e86\u5728\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u60a8\u8fd8\u9700\u8981\u5b89\u88c5OpenMPI\u3002</p> <p>\u26a0\ufe0f \u5f53\u524d\u7248\u672c\u4ec5\u652f\u6301Ascend\u5e73\u53f0\uff0cGPU\u4f1a\u5728\u540e\u7eed\u652f\u6301\uff0c\u656c\u8bf7\u671f\u5f85\u3002</p>"},{"location":"zh/installation/#pypi","title":"PyPI\u6e90\u5b89\u88c5","text":"<p>MindYOLO \u53d1\u5e03\u4e3a\u4e00\u4e2a<code>Python\u5305</code>\u5e76\u80fd\u591f\u901a\u8fc7<code>pip</code>\u8fdb\u884c\u5b89\u88c5\u3002\u6211\u4eec\u63a8\u8350\u60a8\u5728<code>\u865a\u62df\u73af\u5883</code>\u5b89\u88c5\u4f7f\u7528\u3002 \u6253\u5f00\u7ec8\u7aef\uff0c\u8f93\u5165\u4ee5\u4e0b\u6307\u4ee4\u6765\u5b89\u88c5 MindYOLO:</p> <pre><code>pip install mindyolo\n</code></pre>"},{"location":"zh/installation/#_3","title":"\u6e90\u7801\u5b89\u88c5 (\u672a\u7ecf\u6d4b\u8bd5\u7248\u672c)","text":""},{"location":"zh/installation/#from-vsc","title":"from VSC","text":"<pre><code>pip install git+https://github.com/mindspore-lab/mindyolo.git\n</code></pre>"},{"location":"zh/installation/#from-local-src","title":"from local src","text":"<p>\u7531\u4e8e\u672c\u9879\u76ee\u5904\u4e8e\u6d3b\u8dc3\u5f00\u53d1\u9636\u6bb5\uff0c\u5982\u679c\u60a8\u662f\u5f00\u53d1\u8005\u6216\u8005\u8d21\u732e\u8005\uff0c\u8bf7\u4f18\u5148\u9009\u62e9\u6b64\u5b89\u88c5\u65b9\u5f0f\u3002</p> <p>MindYOLO \u53ef\u4ee5\u5728\u7531 <code>GitHub</code> \u514b\u9686\u4ed3\u5e93\u5230\u672c\u5730\u6587\u4ef6\u5939\u540e\u76f4\u63a5\u4f7f\u7528\u3002 \u8fd9\u5bf9\u4e8e\u60f3\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684\u5f00\u53d1\u8005\u5341\u5206\u65b9\u4fbf:</p> <pre><code>git clone https://github.com/mindspore-lab/mindyolo.git\n</code></pre> <p>\u5728\u514b\u9686\u5230\u672c\u5730\u4e4b\u540e\uff0c\u63a8\u8350\u60a8\u4f7f\u7528\"\u53ef\u7f16\u8f91\"\u6a21\u5f0f\u8fdb\u884c\u5b89\u88c5\uff0c\u8fd9\u6709\u52a9\u4e8e\u89e3\u51b3\u6f5c\u5728\u7684\u6a21\u5757\u5bfc\u5165\u95ee\u9898\u3002</p> <pre><code>cd mindyolo\npip install -e .\n</code></pre> <p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u9009\u7684 fast coco api \u63a5\u53e3\u7528\u4e8e\u63d0\u5347\u9a8c\u8bc1\u8fc7\u7a0b\u7684\u901f\u5ea6\u3002\u4ee3\u7801\u662f\u4ee5C++\u5f62\u5f0f\u63d0\u4f9b\u7684\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5 (\u6b64\u64cd\u4f5c\u662f\u53ef\u9009\u7684) :</p> <pre><code>cd mindyolo/csrc\nsh build.sh\n</code></pre> <p>\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u57fa\u4e8eMindSpore Custom\u81ea\u5b9a\u4e49\u7b97\u5b50 \u7684GPU\u878d\u5408\u7b97\u5b50\uff0c\u7528\u4e8e\u63d0\u5347\u8bad\u7ec3\u8fc7\u7a0b\u7684\u901f\u5ea6\u3002\u4ee3\u7801\u91c7\u7528C++\u548cCUDA\u5f00\u53d1\uff0c\u4f4d\u4e8e<code>examples/custom_gpu_op/</code>\u8def\u5f84\u4e0b\u3002\u60a8\u53ef\u53c2\u8003\u793a\u4f8b\u811a\u672c<code>examples/custom_gpu_op/iou_loss_fused.py</code>\uff0c\u4fee\u6539<code>mindyolo/models/losses/iou_loss.py</code>\u7684<code>bbox_iou</code>\u65b9\u6cd5\uff0c\u5728GPU\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u8be5\u7279\u6027\u3002\u8fd0\u884c<code>iou_loss_fused.py</code>\u524d\uff0c\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u7684\u547d\u4ee4\uff0c\u7f16\u8bd1\u751f\u6210GPU\u878d\u5408\u7b97\u5b50\u8fd0\u884c\u6240\u4f9d\u8d56\u7684\u52a8\u6001\u5e93 (\u6b64\u64cd\u4f5c\u662f\u53ef\u9009\u7684) :</p> <pre><code>bash examples/custom_gpu_op/fused_op/build.sh\n</code></pre>"},{"location":"zh/modelzoo/","title":"\u6a21\u578b\u4ed3\u5e93","text":""},{"location":"zh/how_to_guides/callback/","title":"MindYOLO\u56de\u8c03\u51fd\u6570\u7528\u6cd5","text":"<p>\u56de\u8c03\u51fd\u6570\uff1a\u5f53\u7a0b\u5e8f\u8fd0\u884c\u5230\u67d0\u4e2a\u6302\u8f7d\u70b9\u65f6\uff0c\u4f1a\u81ea\u52a8\u8c03\u7528\u5728\u8fd0\u884c\u65f6\u6ce8\u518c\u5230\u8be5\u6302\u8f7d\u70b9\u7684\u6240\u6709\u65b9\u6cd5\u3002 \u901a\u8fc7\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u53ef\u4ee5\u589e\u52a0\u7a0b\u5e8f\u7684\u7075\u6d3b\u6027\u548c\u6269\u5c55\u6027\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u4ee5\u5c06\u81ea\u5b9a\u4e49\u65b9\u6cd5\u6ce8\u518c\u5230\u8981\u8c03\u7528\u7684\u6302\u8f7d\u70b9\uff0c\u800c\u65e0\u9700\u4fee\u6539\u7a0b\u5e8f\u4e2d\u7684\u4ee3\u7801\u3002</p> <p>\u5728MindYOLO\u4e2d\uff0c\u56de\u8c03\u51fd\u6570\u5177\u4f53\u5b9e\u73b0\u5728mindyolo/utils/callback.py\u6587\u4ef6\u4e2d\u3002 <pre><code>#mindyolo/utils/callback.py\n@CALLBACK_REGISTRY.registry_module()\nclass callback_class_name(BaseCallback):\n\n    def __init__(self, **kwargs):\n        super().__init__()\n        ...\n    def callback_fn_name(self, run_context: RunContext):\n        pass\n</code></pre></p> <p>\u901a\u8fc7\u6a21\u578b\u7684yaml\u6587\u4ef6callback\u5b57\u6bb5\u4e0b\u6dfb\u52a0\u4e00\u4e2a\u5b57\u5178\u5217\u8868\u6765\u5b9e\u73b0\u8c03\u7528 <pre><code>#\u56de\u8c03\u51fd\u6570\u914d\u7f6e\u5b57\u5178\uff1a\ncallback:\n- { name: callback_class_name, args: xx }\n- { name: callback_class_name2, args: xx }\n</code></pre> \u4f8b\u5982\u4ee5YOLOX\u4e3a\u793a\u4f8b\uff1a</p> <p>\u5728mindyolo/utils/callback.py\u6587\u4ef6YoloxSwitchTrain\u7c7b\u4e2don_train_step_begin\u65b9\u6cd5\u91cc\u9762\u6dfb\u52a0\u903b\u8f91\uff0c\u6253\u5370\u201ctrain step begin\u201d\u7684\u65e5\u5fd7 <pre><code>@CALLBACK_REGISTRY.registry_module()\nclass YoloxSwitchTrain(BaseCallback):\n\n    def on_train_step_begin(self, run_context: RunContext):\n         # \u81ea\u5b9a\u4e49\u903b\u8f91\n        logger.info(\"train step begin\")\n        pass\n</code></pre> YOLOX\u5bf9\u5e94\u7684yaml\u6587\u4ef6configs/yolox/hyp.scratch.yaml\u7684callback\u5b57\u6bb5\u4e0b\u6dfb\u52a0\u8be5\u56de\u8c03\u51fd\u6570 <pre><code>callback:\n- { name: YoloxSwitchTrain, switch_epoch_num: 285 }\n</code></pre> \u5219\u6bcf\u4e2a\u8bad\u7ec3step\u6267\u884c\u524d\u90fd\u4f1a\u6267\u884clogger.info(\"train step begin\")\u8bed\u53e5\u3002</p> <p>\u501f\u52a9\u56de\u8c03\u51fd\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u67d0\u4e2a\u6302\u8f7d\u70b9\u9700\u8981\u6267\u884c\u7684\u903b\u8f91\uff0c\u800c\u65e0\u9700\u7406\u89e3\u5b8c\u6574\u7684\u8bad\u7ec3\u6d41\u7a0b\u7684\u4ee3\u7801\u3002</p>"},{"location":"zh/how_to_guides/data_preparation/","title":"\u6570\u636e\u51c6\u5907","text":""},{"location":"zh/how_to_guides/data_preparation/#_2","title":"\u6570\u636e\u96c6\u683c\u5f0f\u4ecb\u7ecd","text":"<p>\u4e0b\u8f7dcoco2017 YOLO\u683c\u5f0f coco2017labels-segments \u4ee5\u53cacoco2017 \u539f\u59cb\u56fe\u7247 train2017 , val2017 \uff0c\u7136\u540e\u5c06coco2017 \u539f\u59cb\u56fe\u7247\u653e\u5230coco2017 YOLO\u683c\u5f0f images\u76ee\u5f55\u4e0b\uff1a <pre><code>\u2514\u2500 coco2017_yolo\n    \u251c\u2500 annotations\n        \u2514\u2500 instances_val2017.json\n    \u251c\u2500 images\n        \u251c\u2500 train2017   # coco2017 \u539f\u59cb\u56fe\u7247\n        \u2514\u2500 val2017     # coco2017 \u539f\u59cb\u56fe\u7247\n    \u251c\u2500 labels\n        \u251c\u2500 train2017\n        \u2514\u2500 val2017\n    \u251c\u2500 train2017.txt\n    \u251c\u2500 val2017.txt\n    \u2514\u2500 test-dev2017.txt\n</code></pre> \u5176\u4e2dtrain.txt\u6587\u4ef6\u6bcf\u884c\u5bf9\u5e94\u5355\u5f20\u56fe\u7247\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u4f8b\u5982\uff1a <pre><code>./images/train2017/00000000.jpg\n./images/train2017/00000001.jpg\n./images/train2017/00000002.jpg\n./images/train2017/00000003.jpg\n./images/train2017/00000004.jpg\n./images/train2017/00000005.jpg\n</code></pre> labels\u4e0b\u7684train2017\u6587\u4ef6\u5939\u4e0b\u7684txt\u6587\u4ef6\u4e3a\u76f8\u5e94\u56fe\u7247\u7684\u6807\u6ce8\u4fe1\u606f\uff0c\u652f\u6301detect\u548csegment\u4e24\u79cd\u683c\u5f0f\u3002</p> <p>detect\u683c\u5f0f\uff1a\u901a\u5e38\u6bcf\u884c\u67095\u5217\uff0c\u5206\u522b\u5bf9\u5e94\u7c7b\u522bid\u4ee5\u53ca\u6807\u6ce8\u6846\u5f52\u4e00\u5316\u4e4b\u540e\u7684\u4e2d\u5fc3\u70b9\u5750\u6807xy\u548c\u5bbd\u9ad8wh <pre><code>62 0.417040 0.206280 0.403600 0.412560\n62 0.818810 0.197933 0.174740 0.189680\n39 0.684540 0.277773 0.086240 0.358960\n0 0.620220 0.725853 0.751680 0.525840\n63 0.197190 0.364053 0.394380 0.669653\n39 0.932330 0.226240 0.034820 0.076640\n</code></pre> segment\u683c\u5f0f\uff1a\u6bcf\u884c\u7b2c\u4e00\u4e2a\u6570\u636e\u4e3a\u7c7b\u522bid\uff0c\u540e\u7eed\u4e3a\u4e24\u4e24\u6210\u5bf9\u7684\u5f52\u4e00\u5316\u5750\u6807\u70b9x,y</p> <p><pre><code>45 0.782016 0.986521 0.937078 0.874167 0.957297 0.782021 0.950562 0.739333 0.825844 0.561792 0.714609 0.420229 0.657297 0.391021 0.608422 0.4 0.0303438 0.750562 0.0016875 0.811229 0.003375 0.889896 0.0320156 0.986521\n45 0.557859 0.143813 0.487078 0.0314583 0.859547 0.00897917 0.985953 0.130333 0.984266 0.184271 0.930344 0.386521 0.80225 0.480896 0.763484 0.485396 0.684266 0.39775 0.670781 0.3955 0.679219 0.310104 0.642141 0.253937 0.561234 0.155063 0.559547 0.137083\n50 0.39 0.727063 0.418234 0.649417 0.455297 0.614125 0.476469 0.614125 0.51 0.590583 0.54 0.569417 0.575297 0.562354 0.601766 0.56 0.607062 0.536479 0.614125 0.522354 0.637063 0.501167 0.665297 0.48 0.69 0.477646 0.698828 0.494125 0.698828 0.534125 0.712938 0.529417 0.742938 0.548229 0.760594 0.564708 0.774703 0.550583 0.778234 0.536479 0.781766 0.531771 0.792359 0.541167 0.802937 0.555292 0.802937 0.569417 0.802937 0.576479 0.822359 0.576479 0.822359 0.597646 0.811766 0.607062 0.811766 0.618833 0.818828 0.637646 0.820594 0.656479 0.827641 0.687063 0.827641 0.703521 0.829406 0.727063 0.838234 0.708229 0.852359 0.729417 0.868234 0.750583 0.871766 0.792938 0.877063 0.821167 0.884125 0.861167 0.817062 0.92 0.734125 0.976479 0.711172 0.988229 0.48 0.988229 0.494125 0.967063 0.517062 0.912937 0.508234 0.832937 0.485297 0.788229 0.471172 0.774125 0.395297 0.729417\n45 0.375219 0.0678333 0.375219 0.0590833 0.386828 0.0503542 0.424156 0.0315208 0.440797 0.0281458 0.464 0.0389167 0.525531 0.115583 0.611797 0.222521 0.676359 0.306583 0.678875 0.317354 0.677359 0.385271 0.66475 0.394687 0.588594 0.407458 0.417094 0.517771 0.280906 0.604521 0.0806562 0.722208 0.0256719 0.763917 0.00296875 0.809646 0 0.786104 0 0.745083 0 0.612583 0.03525 0.613271 0.0877187 0.626708 0.130594 0.626708 0.170437 0.6025 0.273844 0.548708 0.338906 0.507 0.509906 0.4115 0.604734 0.359042 0.596156 0.338188 0.595141 0.306583 0.595141 0.291792 0.579516 0.213104 0.516969 0.129042 0.498297 0.100792 0.466516 0.0987708 0.448875 0.0786042 0.405484 0.0705208 0.375219 0.0678333 0.28675 0.108375 0.282719 0.123167 0.267078 0.162854 0.266062 0.189083 0.245391 0.199833 0.203516 0.251625 0.187375 0.269771 0.159641 0.240188 0.101125 0.249604 0 0.287271 0 0.250271 0 0.245563 0.0975938 0.202521 0.203516 0.145354 0.251953 0.123167 0.28675 0.108375\n49 0.587812 0.128229 0.612281 0.0965625 0.663391 0.0840833 0.690031 0.0908125 0.700109 0.10425 0.705859 0.133042 0.700109 0.143604 0.686422 0.146479 0.664828 0.153188 0.644672 0.157042 0.629563 0.175271 0.605797 0.181021 0.595 0.147437\n49 0.7405 0.178417 0.733719 0.173896 0.727781 0.162583 0.729484 0.150167 0.738812 0.124146 0.747281 0.0981458 0.776109 0.0811875 0.804094 0.0845833 0.814266 0.102667 0.818516 0.115104 0.812578 0.133208 0.782906 0.151292 0.754063 0.172771\n49 0.602656 0.178854 0.636125 0.167875 0.655172 0.165125 0.6665 0.162375 0.680391 0.155521 0.691719 0.153458 0.703047 0.154146 0.713859 0.162375 0.724156 0.174729 0.730844 0.193271 0.733422 0.217979 0.733938 0.244063 0.733422 0.281813 0.732391 0.295542 0.728266 0.300354 0.702016 0.294854 0.682969 0.28525 0.672156 0.270146\n49 0.716891 0.0519583 0.683766 0.0103958 0.611688 0.0051875 0.568828 0.116875 0.590266 0.15325 0.590266 0.116875 0.613641 0.0857083 0.631172 0.0857083 0.6565 0.083125 0.679875 0.0883125 0.691563 0.0961042 0.711031 0.0649375\n</code></pre> instances_val2017.json\u4e3acoco\u683c\u5f0f\u7684\u9a8c\u8bc1\u96c6\u6807\u6ce8\uff0c\u53ef\u76f4\u63a5\u8c03\u7528coco api\u7528\u4e8emap\u7684\u8ba1\u7b97\u3002</p> <p>\u8bad\u7ec3&amp;\u63a8\u7406\u65f6\uff0c\u9700\u4fee\u6539<code>configs/coco.yaml</code>\u4e2d\u7684<code>train_set</code>,<code>val_set</code>,<code>test_set</code>\u4e3a\u771f\u5b9e\u6570\u636e\u8def\u5f84</p> <p>\u4f7f\u7528MindYOLO\u5957\u4ef6\u5b8c\u6210\u81ea\u5b9a\u4e49\u6570\u636e\u96c6finetune\u7684\u5b9e\u9645\u6848\u4f8b\u53ef\u53c2\u8003README.md</p>"},{"location":"zh/how_to_guides/write_a_new_model/","title":"\u6a21\u578b\u7f16\u5199\u6307\u5357","text":"<p>\u672c\u6587\u6863\u63d0\u4f9bMindYOLO\u7f16\u5199\u81ea\u5b9a\u4e49\u6a21\u578b\u7684\u6559\u7a0b\u3002 \u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a - \u6a21\u578b\u5b9a\u4e49\uff1a\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\u4e00\u4e2a\u7f51\u7edc\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528yaml\u6587\u4ef6\u65b9\u5f0f\u5b9a\u4e49\u4e00\u4e2a\u7f51\u7edc\u3002 - \u6ce8\u518c\u6a21\u578b\uff1a\u53ef\u9009\uff0c\u6ce8\u518c\u4e4b\u540e\u53ef\u4ee5\u5728create_model\u63a5\u53e3\u4e2d\u4f7f\u7528\u6587\u4ef6\u540d\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u6a21\u578b - \u9a8c\u8bc1: \u9a8c\u8bc1\u6a21\u578b\u662f\u5426\u53ef\u8fd0\u884c</p>"},{"location":"zh/how_to_guides/write_a_new_model/#_2","title":"\u6a21\u578b\u5b9a\u4e49","text":""},{"location":"zh/how_to_guides/write_a_new_model/#1python","title":"1.\u76f4\u63a5\u4f7f\u7528python\u4ee3\u7801\u6765\u7f16\u5199\u7f51\u7edc","text":""},{"location":"zh/how_to_guides/write_a_new_model/#_3","title":"\u6a21\u5757\u5bfc\u5165","text":"<p>\u5bfc\u5165MindSpore\u6846\u67b6\u4e2d\u7684nn\u6a21\u5757\u548cops\u6a21\u5757\uff0c\u7528\u4e8e\u5b9a\u4e49\u795e\u7ecf\u7f51\u7edc\u7684\u7ec4\u4ef6\u548c\u64cd\u4f5c\u3002 <pre><code>import mindspore.nn as nn\nimport mindspore.ops.operations as ops\n</code></pre></p>"},{"location":"zh/how_to_guides/write_a_new_model/#_4","title":"\u521b\u5efa\u6a21\u578b","text":"<p>\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7ee7\u627f\u81eann.Cell\u7684\u6a21\u578b\u7c7bMyModel\u3002\u5728\u6784\u9020\u51fd\u6570__init__\u4e2d\uff0c\u5b9a\u4e49\u6a21\u578b\u7684\u5404\u4e2a\u7ec4\u4ef6\uff1a</p> <pre><code>class MyModel(nn.Cell):\n    def __init__(self):\n        super(MyModel, self).__init__()\n        #conv1\u662f\u4e00\u4e2a2D\u5377\u79ef\u5c42\uff0c\u8f93\u5165\u901a\u9053\u6570\u4e3a3\uff0c\u8f93\u51fa\u901a\u9053\u6570\u4e3a16\uff0c\u5377\u79ef\u6838\u5927\u5c0f\u4e3a3x3\uff0c\u6b65\u957f\u4e3a1\uff0c\u586b\u5145\u4e3a1\u3002\n        self.conv1 = nn.Conv2d(3, 16, kernel_size=3, stride=1, padding=1)\n        #relu\u662f\u4e00\u4e2aReLU\u6fc0\u6d3b\u51fd\u6570\u64cd\u4f5c\u3002\n        self.relu = ops.ReLU()\n        #axpool\u662f\u4e00\u4e2a2D\u6700\u5927\u6c60\u5316\u5c42\uff0c\u6c60\u5316\u7a97\u53e3\u5927\u5c0f\u4e3a2x2\uff0c\u6b65\u957f\u4e3a2\u3002\n        self.maxpool = nn.MaxPool2d(kernel_size=2, stride=2)\n        #conv2\u662f\u53e6\u4e00\u4e2a2D\u5377\u79ef\u5c42\uff0c\u8f93\u5165\u901a\u9053\u6570\u4e3a16\uff0c\u8f93\u51fa\u901a\u9053\u6570\u4e3a32\uff0c\u5377\u79ef\u6838\u5927\u5c0f\u4e3a3x3\uff0c\u6b65\u957f\u4e3a1\uff0c\u586b\u5145\u4e3a1\u3002\n        self.conv2 = nn.Conv2d(16, 32, kernel_size=3, stride=1, padding=1)\n        #fc\u662f\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u8f93\u5165\u7279\u5f81\u7ef4\u5ea6\u4e3a32x8x8\uff0c\u8f93\u51fa\u7279\u5f81\u7ef4\u5ea6\u4e3a10\u3002\n        self.fc = nn.Dense(32 * 8 * 8, 10)\n\n    #\u5728construct\u65b9\u6cd5\u4e2d\uff0c\u5b9a\u4e49\u4e86\u6a21\u578b\u7684\u524d\u5411\u4f20\u64ad\u8fc7\u7a0b\u3002\u8f93\u5165x\u7ecf\u8fc7\u5377\u79ef\u3001\u6fc0\u6d3b\u51fd\u6570\u3001\u6c60\u5316\u7b49\u64cd\u4f5c\u540e\uff0c\u901a\u8fc7\u5c55\u5e73\u64cd\u4f5c\u5c06\u7279\u5f81\u5f20\u91cf\u53d8\u4e3a\u4e00\u7ef4\u5411\u91cf\uff0c\u7136\u540e\u901a\u8fc7\u5168\u8fde\u63a5\u5c42\u5f97\u5230\u6700\u7ec8\u7684\u8f93\u51fa\u7ed3\u679c\u3002    \n    def construct(self, x): \n        x = self.conv1(x)\n        x = self.relu(x)\n        x = self.maxpool(x)\n        x = self.conv2(x)\n        x = self.relu(x)\n        x = self.maxpool(x)\n        x = x.view(x.shape[0], -1)\n        x = self.fc(x)\n        return x\n</code></pre>"},{"location":"zh/how_to_guides/write_a_new_model/#_5","title":"\u521b\u5efa\u6a21\u578b\u5b9e\u4f8b","text":"<p>\u901a\u8fc7\u5b9e\u4f8b\u5316MyModel\u7c7b\uff0c\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u5b9e\u4f8bmodel\uff0c\u540e\u7eed\u53ef\u4ee5\u4f7f\u7528\u8be5\u5b9e\u4f8b\u8fdb\u884c\u6a21\u578b\u7684\u8bad\u7ec3\u548c\u63a8\u7406\u3002 <pre><code>model = MyModel()\n</code></pre></p>"},{"location":"zh/how_to_guides/write_a_new_model/#2yaml","title":"2.\u4f7f\u7528yaml\u6587\u4ef6\u7f16\u5199\u7f51\u7edc","text":"<p>\u901a\u5e38\u9700\u8981\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4 - \u65b0\u5efa\u4e00\u4e2amymodel.yaml\u6587\u4ef6 - \u65b0\u5efa\u5bf9\u5e94\u7684mymodel.py\u6587\u4ef6  - \u5728mindyolo/models/init.py\u6587\u4ef6\u4e2d\u5f15\u5165\u8be5\u6a21\u578b</p> <p>\u4ee5\u4e0b\u662f\u7f16\u5199mymodel.yaml\u6587\u4ef6\u7684\u8be6\u7ec6\u6307\u5bfc: \u4ee5\u7f16\u5199\u4e00\u4e2a\u7b80\u5355\u7f51\u7edc\u4e3a\u4f8b\uff1a \u4ee5yaml\u683c\u5f0f\u7f16\u5199\u5fc5\u8981\u53c2\u6570\uff0c\u540e\u7eed\u5728mymodel.py\u6587\u4ef6\u91cc\u9762\u53ef\u4ee5\u7528\u5230\u8fd9\u4e9b\u53c2\u6570\u3002 \u5176\u4e2dnetwork\u90e8\u5206\u4e3a\u6a21\u578b\u7f51\u7edc  [[from, number, module, args], ...]\uff1a\u6bcf\u4e2a\u5143\u7d20\u4ee3\u8868\u4e00\u4e2a\u7f51\u7edc\u5c42\u7684\u914d\u7f6e\u3002 <pre><code># __BASE__\u4e2d\u7684yaml\u8868\u793a\u7528\u4e8e\u7ee7\u627f\u7684\u57fa\u7840\u914d\u7f6e\u6587\u4ef6\uff0c\u91cd\u590d\u7684\u53c2\u6570\u4f1a\u88ab\u5f53\u524d\u6587\u4ef6\u8986\u76d6\uff1b\n__BASE__:\n- '../coco.yaml'\n- './hyp.scratch-high.yaml'\n\nper_batch_size: 32\nimg_size: 640\nsync_bn: False\n\nnetwork:\nmodel_name: mymodel\ndepth_multiple: 1.0  # model depth multiple\nwidth_multiple: 1.0  # layer channel multiple\nstride: [ 8, 16, 32 ]\n\n# \u9aa8\u5e72\u7f51\u7edc\u90e8\u5206\u7684\u914d\u7f6e\uff0c\u6bcf\u5c42\u7684\u5143\u7d20\u542b\u4e49\u4e3a\n# [from, number, module, args]\n# \u4ee5\u7b2c\u4e00\u5c42\u4e3a\u4f8b\uff0c[-1, 1, ConvNormAct, [32, 3, 1]], \u8868\u793a\u8f93\u5165\u6765\u81ea `-1`(\u4e0a\u4e00\u5c42) \uff0c\u91cd\u590d\u6b21\u6570\u4e3a 1\uff0c\u6a21\u5757\u540d\u4e3a ConvNormAct\uff0c\u6a21\u5757\u8f93\u5165\u53c2\u6570\u4e3a [32, 3, 1]\uff1b\nbackbone: [[-1, 1, ConvNormAct, [32, 3, 1]],  # 0\n[-1, 1, ConvNormAct, [64, 3, 2]],  # 1-P1/2\n[-1, 1, Bottleneck, [64]],\n[-1, 1, ConvNormAct, [128, 3, 2]],  # 3-P2/4\n[-1, 2, Bottleneck, [128]],\n[-1, 1, ConvNormAct, [256, 3, 2]],  # 5-P3/8\n[-1, 8, Bottleneck, [256]],\n]\n\n#head\u90e8\u5206\u7684\u914d\u7f6e \nhead: [\n[ -1, 1, ConvNormAct, [ 512, 3, 2 ] ],  # 7-P4/16\n[ -1, 8, Bottleneck, [ 512 ] ],\n[ -1, 1, ConvNormAct, [ 1024, 3, 2 ] ],  # 9-P5/32\n[ -1, 4, Bottleneck, [ 1024 ] ],  # 10\n]\n</code></pre></p> <p>\u7f16\u5199mymodel.py\u6587\u4ef6:</p>"},{"location":"zh/how_to_guides/write_a_new_model/#_6","title":"\u6a21\u5757\u5bfc\u5165","text":"<p>\u9700\u8981\u5bfc\u5165\u5957\u4ef6\u5185\u7684\u6a21\u5757\u3002 \u5982<code>from .registry import register_model</code>\u7b49\u7b49</p> <pre><code>import numpy as np\n\nimport mindspore as ms\nfrom mindspore import Tensor, nn\n\n\nfrom .initializer import initialize_defult #\u7528\u4e8e\u521d\u59cb\u5316\u6a21\u578b\u7684\u9ed8\u8ba4\u53c2\u6570\uff0c\u5305\u62ec\u6743\u91cd\u521d\u59cb\u5316\u65b9\u5f0f\u3001BN \u5c42\u53c2\u6570\u7b49\u3002\nfrom .model_factory import build_model_from_cfg #\u7528\u4e8e\u6839\u636e YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u53c2\u6570\u6784\u5efa\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\uff0c\u5e76\u8fd4\u56de\u8be5\u6a21\u578b\u7684\u5b9e\u4f8b\u3002\nfrom .registry import register_model #\u7528\u4e8e\u5c06\u81ea\u5b9a\u4e49\u7684\u6a21\u578b\u6ce8\u518c\u5230 Mindyolo \u4e2d\uff0c\u4ee5\u4fbf\u5728 YAML \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u3002\n\n#\u53ef\u89c1\u6027\u58f0\u660e\n__all__ = [\"MYmodel\", \"mymodel\"]\n</code></pre>"},{"location":"zh/how_to_guides/write_a_new_model/#_7","title":"\u521b\u5efa\u914d\u7f6e\u5b57\u5178","text":"<p>_cfg\u51fd\u6570\u662f\u4e00\u4e2a\u8f85\u52a9\u51fd\u6570\uff0c\u7528\u4e8e\u521b\u5efa\u914d\u7f6e\u5b57\u5178\u3002\u5b83\u63a5\u53d7\u4e00\u4e2aurl\u53c2\u6570\u548c\u5176\u4ed6\u5173\u952e\u5b57\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5305\u542burl\u548c\u5176\u4ed6\u53c2\u6570\u7684\u5b57\u5178\u3002 default_cfgs\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u7528\u4e8e\u5b58\u50a8\u9ed8\u8ba4\u914d\u7f6e\u3002\u5728\u8fd9\u91cc\uff0cmymodel\u4f5c\u4e3a\u952e\uff0c\u4f7f\u7528_cfg\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u914d\u7f6e\u5b57\u5178\u3002 <pre><code>def _cfg(url=\"\", **kwargs):\n    return {\"url\": url, **kwargs}\n\ndefault_cfgs = {\"mymodel\": _cfg(url=\"\")}\n</code></pre></p>"},{"location":"zh/how_to_guides/write_a_new_model/#_8","title":"\u521b\u5efa\u6a21\u578b","text":"<p>\u5728<code>MindSpore</code>\u4e2d\uff0c\u6a21\u578b\u7684\u7c7b\u7ee7\u627f\u4e8e<code>nn.Cell</code>\uff0c\u4e00\u822c\u6765\u8bf4\u9700\u8981\u91cd\u8f7d\u4ee5\u4e0b\u4e24\u4e2a\u51fd\u6570\uff1a</p> <ul> <li>\u5728<code>__init__</code>\u51fd\u6570\u4e2d\uff0c\u5e94\u5f53\u5b9a\u4e49\u6a21\u578b\u4e2d\u9700\u8981\u7528\u5230\u7684module\u5c42\u3002</li> <li>\u5728<code>construct</code>\u51fd\u6570\u4e2d\u5b9a\u4e49\u6a21\u578b\u524d\u5411\u903b\u8f91\u3002 </li> </ul> <pre><code>class MYmodel(nn.Cell):\n\n    def __init__(self, cfg, in_channels=3, num_classes=None, sync_bn=False):\n        super(MYmodel, self).__init__()\n        self.cfg = cfg\n        self.stride = Tensor(np.array(cfg.stride), ms.int32)\n        self.stride_max = int(max(self.cfg.stride))\n        ch, nc = in_channels, num_classes\n\n        self.nc = nc  # override yaml value\n        self.model = build_model_from_cfg(model_cfg=cfg, in_channels=ch, num_classes=nc, sync_bn=sync_bn)\n        self.names = [str(i) for i in range(nc)]  # default names\n\n        initialize_defult()  # \u53ef\u9009\uff0c\u4f60\u53ef\u80fd\u9700\u8981initialize_defult\u65b9\u6cd5\u4ee5\u83b7\u5f97\u548cpytorch\u4e00\u6837\u7684conv2d\u3001dense\u5c42\u7684\u521d\u59cb\u5316\u65b9\u5f0f\uff1b\n\n    def construct(self, x):\n        return self.model(x)\n</code></pre>"},{"location":"zh/how_to_guides/write_a_new_model/#_9","title":"\u6ce8\u518c\u6a21\u578b\uff08\u53ef\u9009\uff09","text":"<p>\u5982\u679c\u9700\u8981\u4f7f\u7528mindyolo\u63a5\u53e3\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u7684\u6a21\u578b\uff0c\u90a3\u4e48\u9700\u8981\u5148\u5bf9\u6a21\u578b\u8fdb\u884c**\u6ce8\u518c**\u548c**\u5bfc\u5165**</p> <p>\u6a21\u578b\u6ce8\u518c <pre><code>@register_model #\u6ce8\u518c\u540e\u7684\u6a21\u578b\u53ef\u4ee5\u901a\u8fc7 create_model \u63a5\u53e3\u4ee5\u6a21\u578b\u540d\u7684\u65b9\u5f0f\u8fdb\u884c\u8bbf\u95ee\uff1b\ndef mymodel(cfg, in_channels=3, num_classes=None, **kwargs) -&gt; MYmodel:\n\"\"\"Get GoogLeNet model.\n    Refer to the base class `models.GoogLeNet` for more details.\"\"\"\n    model = MYmodel(cfg=cfg, in_channels=in_channels, num_classes=num_classes, **kwargs)\n    return model\n</code></pre> \u6a21\u578b\u5bfc\u5165 </p> <pre><code>#\u5728mindyolo/models/_init_.py\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\n\nfrom . import mymodel #mymodel.py\u6587\u4ef6\u901a\u5e38\u653e\u5728mindyolo/models/\u76ee\u5f55\u4e0b\n__all__.extend(mymodel.__all__)\nfrom .mymodel import *\n</code></pre>"},{"location":"zh/how_to_guides/write_a_new_model/#main","title":"\u9a8c\u8bc1main","text":"<p>\u521d\u59cb\u7f16\u5199\u9636\u6bb5\u5e94\u5f53\u4fdd\u8bc1\u6a21\u578b\u662f\u53ef\u8fd0\u884c\u7684\u3002\u53ef\u901a\u8fc7\u4e0b\u8ff0\u4ee3\u7801\u5757\u8fdb\u884c\u57fa\u7840\u9a8c\u8bc1\uff1a \u9996\u5148\u5bfc\u5165\u6240\u9700\u7684\u6a21\u5757\u548c\u51fd\u6570\u3002\u7136\u540e\uff0c\u901a\u8fc7\u89e3\u6790\u914d\u7f6e\u5bf9\u8c61\u3002</p> <p><pre><code>if __name__ == \"__main__\":\n    from mindyolo.models.model_factory import create_model\n    from mindyolo.utils.config import parse_config\n\n    opt = parse_config()\n</code></pre> \u521b\u5efa\u6a21\u578b\u5e76\u6307\u5b9a\u76f8\u5173\u53c2\u6570\uff0c\u6ce8\u610f\uff1a\u5982\u679c\u8981\u5728create_model\u4e2d\u4f7f\u7528\u6587\u4ef6\u540d\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u6a21\u578b\uff0c\u90a3\u4e48\u9700\u8981\u5148\u4f7f\u7528\u6ce8\u518c\u5668@register_model\u8fdb\u884c\u6ce8\u518c\uff0c\u8bf7\u53c2\u89c1\u4e0a\u6587 \u6ce8\u518c\u6a21\u578b\uff08\u53ef\u9009)\u90e8\u5206\u5185\u5bb9 <pre><code>    model = create_model(\n        model_name=\"mymodel\",\n        model_cfg=opt.net,\n        num_classes=opt.data.nc,\n        sync_bn=opt.sync_bn if hasattr(opt, \"sync_bn\") else False,\n    ) \n</code></pre></p> <p>\u5426\u5219\uff0c\u8bf7\u4f7f\u7528import\u7684\u65b9\u5f0f\u5f15\u5165\u6a21\u578b</p> <p><pre><code>    from mindyolo.models.mymodel import MYmodel\n    model = MYmodel(\n        model_name=\"mymodel\",\n        model_cfg=opt.net,\n        num_classes=opt.data.nc,\n        sync_bn=opt.sync_bn if hasattr(opt, \"sync_bn\") else False,\n    ) \n</code></pre> \u6700\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u8f93\u5165\u5f20\u91cfx\u5e76\u5c06\u5176\u4f20\u9012\u7ed9\u6a21\u578b\u8fdb\u884c\u524d\u5411\u8ba1\u7b97\u3002 <pre><code>    x = Tensor(np.random.randn(1, 3, 640, 640), ms.float32)\n    out = model(x)\n    out = out[0] if isinstance(out, (list, tuple)) else out\n    print(f\"Output shape is {[o.shape for o in out]}\")\n</code></pre></p>"},{"location":"zh/notes/changelog/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u5373\u5c06\u5230\u6765</p>"},{"location":"zh/notes/code_of_conduct/","title":"\u884c\u4e3a\u51c6\u5219","text":"<p>\u5373\u5c06\u5230\u6765</p>"},{"location":"zh/notes/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>\u5373\u5c06\u5230\u6765</p>"},{"location":"zh/tutorials/configuration/","title":"\u914d\u7f6e","text":""},{"location":"zh/tutorials/data_augmentation/#_2","title":"\u5957\u4ef6\u81ea\u5e26\u7684\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u6e05\u5355","text":"\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540d \u6982\u8981\u89e3\u91ca mosaic \u968f\u673a\u9009\u62e9mosaic4\u548cmosaic9 mosaic4 4\u5206\u683c\u62fc\u63a5 mosaic9 9\u5206\u683c\u62fc\u63a5 mixup \u5bf9\u4e24\u4e2a\u56fe\u50cf\u8fdb\u884c\u7ebf\u6027\u6df7\u5408 pastein \u526a\u8d34\u589e\u5f3a random_perspective \u968f\u673a\u900f\u89c6\u53d8\u6362 hsv_augment \u968f\u673a\u989c\u8272\u53d8\u6362 fliplr \u6c34\u5e73\u7ffb\u8f6c flipud \u5782\u76f4\u7ffb\u8f6c letterbox \u7f29\u653e\u548c\u586b\u5145 label_norm \u6807\u7b7e\u5f52\u4e00\u5316 \u5750\u6807\u5f52\u4e00\u5316\u52300-1\u5230\u8303\u56f4 label_pad \u5c06\u6807\u7b7e\u4fe1\u606f\u586b\u5145\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4 image_norm \u56fe\u50cf\u6570\u636e\u6807\u51c6\u5316 image_transpose \u901a\u9053\u8f6c\u7f6e\u548c\u7ef4\u5ea6\u8f6c\u7f6e albumentations albumentations\u6570\u636e\u589e\u5f3a <p>\u8fd9\u4e9b\u6570\u636e\u589e\u5f3a\u51fd\u6570\u5b9a\u4e49\u5728 mindyolo/data/dataset.py \u4e2d\u3002</p>"},{"location":"zh/tutorials/data_augmentation/#_3","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>MindYOLO\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u901a\u8fc7\u5728yaml\u6587\u4ef6\u91cc\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u8bad\u7ec3\u8fc7\u7a0b\u6dfb\u52a0\u4e00\u4e2a\u6570\u636e\u589e\u5f3a\uff0c\u9700\u8981\u5728yaml\u6587\u4ef6data.train_transforms\u5b57\u6bb5\u4e0b\u6dfb\u52a0\u4e00\u4e2a\u5b57\u5178\u5217\u8868\uff0c\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u81ea\u4e0a\u800c\u4e0b\u4f9d\u6b21\u7f57\u5217\u3002</p> <p>\u4e00\u4e2a\u5178\u578b\u7684\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u914d\u7f6e\u5b57\u5178\u91cc\u5fc5\u987b\u6709func_name\uff0c\u8868\u793a\u5e94\u7528\u7684\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540d\uff0c\u800c\u540e\u7f57\u5217\u8be5\u65b9\u6cd5\u9700\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\uff0c\u82e5\u6ca1\u6709\u5728\u6570\u636e\u589e\u5f3a\u914d\u7f6e\u5b57\u5178\u4e2d\u914d\u7f6e\u53c2\u6570\u9879\uff0c\u5219\u4f1a\u9009\u62e9\u8be5\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u9ed8\u8ba4\u7684\u6570\u503c\u3002</p> <p>\u6570\u636e\u589e\u5f3a\u901a\u7528\u914d\u7f6e\u5b57\u5178\uff1a <pre><code>- {func_name: \u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540d1, args11=x11, args12=x12, ..., args1n=x1n}\n- {func_name: \u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540d2, args21=x21, args22=x22, ..., args2n=x2n}\n...\n- {func_name: \u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540dn, argsn1=xn1, argsn2=xn2, ..., argsnn=xnn}\n</code></pre></p> <p>\u4ee5YOLOv7\u8bad\u7ec3\u6570\u636e\u589e\u5f3a\u793a\u4f8b\uff1a <pre><code># \u6587\u4ef6\u76ee\u5f55\uff1aconfigs/yolov7/hyp.scratch.tiny.yaml (https://github.com/mindspore-lab/mindyolo/blob/master/configs/yolov7/hyp.scratch.tiny.yaml)\ntrain_transforms:\n- {func_name: mosaic, prob: 1.0, mosaic9_prob: 0.2, translate: 0.1, scale: 0.5}\n- {func_name: mixup, prob: 0.05, alpha: 8.0, beta: 8.0, needed_mosaic: True}\n- {func_name: hsv_augment, prob: 1.0, hgain: 0.015, sgain: 0.7, vgain: 0.4}\n- {func_name: pastein, prob: 0.05, num_sample: 30}\n- {func_name: label_norm, xyxy2xywh_: True}\n- {func_name: fliplr, prob: 0.5}\n- {func_name: label_pad, padding_size: 160, padding_value: -1}\n- {func_name: image_norm, scale: 255.}\n- {func_name: image_transpose, bgr2rgb: True, hwc2chw: True}\n</code></pre> \u6ce8\u610f\uff1afunc_name\u8868\u793a\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u540d\uff0cprob\uff0cmosaic9_prob\uff0ctranslate\uff0cscale\u4e3a\u8be5\u65b9\u6cd5\u53c2\u6570\u3002 \u5176\u4e2dprob\u4e3a\u6240\u6709\u65b9\u6cd5\u5747\u6709\u7684\u53c2\u6570\uff0c\u8868\u793a\u8be5\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u7684\u6267\u884c\u6982\u7387\uff0c\u9ed8\u8ba4\u503c\u4e3a1</p> <p>\u4e0a\u8ff0yaml\u6587\u4ef6\u6267\u884c\u7684\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ul> <li> <p><code>mosaic</code>\uff1a\u4ee51.0\u7684\u6982\u7387\u5bf9\u8f93\u5165\u7684\u56fe\u7247\u8fdb\u884cmosaic\u64cd\u4f5c\uff0c\u5373\u5c064\u5f20\u4e0d\u540c\u7684\u56fe\u7247\u62fc\u63a5\u6210\u4e00\u5f20\u56fe\u7247\u3002mosaic9_prob\u8868\u793a\u4f7f\u75289\u5bab\u683c\u65b9\u5f0f\u8fdb\u884c\u62fc\u63a5\u7684\u6982\u7387\uff0ctranslate\u548cscale\u5206\u522b\u8868\u793a\u968f\u673a\u5e73\u79fb\u548c\u7f29\u653e\u7684\u7a0b\u5ea6\u3002 \u5982\u56fe\u6240\u793a\uff1a </p> </li> <li> <p><code>mixup</code>\uff1a\u4ee50.05\u7684\u6982\u7387\u5bf9\u8f93\u5165\u7684\u56fe\u7247\u8fdb\u884cmixup\u64cd\u4f5c\uff0c\u5373\u5c06\u4e24\u5f20\u4e0d\u540c\u7684\u56fe\u7247\u8fdb\u884c\u6df7\u5408\u3002\u5176\u4e2dalpha\u548cbeta\u8868\u793a\u6df7\u5408\u7cfb\u6570\uff0cneeded_mosaic\u8868\u793a\u662f\u5426\u9700\u8981\u4f7f\u7528mosaic\u8fdb\u884c\u6df7\u5408\u3002</p> </li> <li> <p><code>hsv_augment</code>: HSV\u589e\u5f3a, \u4ee51.0\u7684\u6982\u7387\u5bf9\u8f93\u5165\u7684\u56fe\u7247\u8fdb\u884cHSV\u989c\u8272\u7a7a\u95f4\u7684\u8c03\u6574\uff0c\u589e\u52a0\u6570\u636e\u591a\u6837\u6027\u3002\u5176\u4e2dhgain\u3001sgain\u548cvgain\u5206\u522b\u8868\u793a\u5bf9H\u3001S\u3001V\u901a\u9053\u7684\u8c03\u6574\u7a0b\u5ea6\u3002</p> </li> <li> <p><code>pastein</code>\uff1a\u4ee50.05\u7684\u6982\u7387\u5728\u8f93\u5165\u7684\u56fe\u7247\u4e2d\u968f\u673a\u8d34\u5165\u4e00\u4e9b\u6837\u672c\u3002\u5176\u4e2dnum_sample\u8868\u793a\u968f\u673a\u8d34\u5165\u7684\u6837\u672c\u6570\u91cf\u3002</p> </li> <li> <p><code>label_norm</code>\uff1a\u5c06\u8f93\u5165\u7684\u6807\u7b7e\u4ece(x1, y1, x2, y2)\u7684\u683c\u5f0f\u8f6c\u6362\u4e3a(x, y, w, h)\u7684\u683c\u5f0f\u3002</p> </li> <li> <p><code>fliplr</code>\uff1a\u4ee50.5\u7684\u6982\u7387\u5bf9\u8f93\u5165\u7684\u56fe\u7247\u8fdb\u884c\u6c34\u5e73\u7ffb\u8f6c\uff0c\u589e\u52a0\u6570\u636e\u591a\u6837\u6027\u3002</p> </li> <li> <p><code>label_pad</code>\uff1a\u5bf9\u8f93\u5165\u7684\u6807\u7b7e\u8fdb\u884c\u586b\u5145\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u56fe\u7247\u90fd\u6709\u76f8\u540c\u6570\u91cf\u7684\u6807\u7b7e\u3002padding_size\u8868\u793a\u586b\u5145\u540e\u6807\u7b7e\u7684\u6570\u91cf\uff0cpadding_value\u8868\u793a\u586b\u5145\u7684\u503c\u3002</p> </li> <li> <p><code>image_norm</code>\uff1a\u5c06\u8f93\u5165\u7684\u56fe\u7247\u50cf\u7d20\u503c\u4ece[0, 255]\u8303\u56f4\u5185\u7f29\u653e\u5230[0, 1]\u8303\u56f4\u5185\u3002</p> </li> <li> <p><code>image_transpose</code>\uff1a\u5c06\u8f93\u5165\u7684\u56fe\u7247\u4eceBGR\u683c\u5f0f\u8f6c\u6362\u4e3aRGB\u683c\u5f0f\uff0c\u5e76\u5c06\u56fe\u7247\u7684\u901a\u9053\u6570\u4eceHWC\u683c\u5f0f\u8f6c\u6362\u4e3aCHW\u683c\u5f0f\u3002</p> </li> </ul> <p>\u6d4b\u8bd5\u6570\u636e\u589e\u5f3a\u9700\u8981\u7528test_transforms\u5b57\u6bb5\u6807\u6ce8\uff0c\u914d\u7f6e\u65b9\u6cd5\u540c\u8bad\u7ec3\u3002</p>"},{"location":"zh/tutorials/data_augmentation/#_4","title":"\u81ea\u5b9a\u4e49\u6570\u636e\u589e\u5f3a","text":"<p>\u7f16\u5199\u6307\u5357\uff1a</p> <ul> <li>\u5728mindyolo/data/dataset.py\u6587\u4ef6COCODataset\u7c7b\u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6570\u636e\u589e\u5f3a\u65b9\u6cd5   </li> <li>\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u7684\u8f93\u5165\u901a\u5e38\u5305\u542b\u56fe\u7247\u3001\u6807\u7b7e\u548c\u81ea\u5b9a\u4e49\u53c2\u6570\u3002  </li> <li>\u7f16\u5199\u51fd\u6570\u4f53\u5185\u5bb9\uff0c\u81ea\u5b9a\u4e49\u8f93\u51fa</li> </ul> <p>\u4e00\u4e2a\u5178\u578b\u7684\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\uff1a <pre><code>#\u5728mindyolo/data/dataset.py COCODataset \u6dfb\u52a0\u5b50\u65b9\u6cd5\n    def data_trans_func(self, image, labels, args1=x1, args2=x2, ..., argsn=xn):\n        # \u6570\u636e\u589e\u5f3a\u903b\u8f91\n        ......\n        return image, labels\n</code></pre> \u81ea\u5b9a\u4e49\u4e00\u4e2a\u529f\u80fd\u4e3a\u65cb\u8f6c\u7684\u6570\u636e\u589e\u5f3a\u51fd\u6570 <pre><code>#mindyolo/data/dataset.py\n    def rotate(self, image, labels, angle):\n        # rotate image\n        image = np.rot90(image, angle // 90)\n        if len(labels):\n            if angle == 90:\n                labels[:, 0], labels[:, 1] = 1 - labels[:, 1], labels[:, 0]\n            elif angle == 180:\n                labels[:, 0], labels[:, 1] = 1 - labels[:, 0], 1 - labels[:, 1]\n            elif angle == 270:\n                labels[:, 0], labels[:, 1] = labels[:, 1], 1 - labels[:, 0]\n        return image, labels\n</code></pre></p> <p>\u4f7f\u7528\u6307\u5357\uff1a - \u5728\u6a21\u578b\u7684yaml\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5b57\u5178\u7684\u5f62\u5f0f\u5b9a\u4e49\u6b64\u6570\u636e\u589e\u5f3a\u65b9\u6cd5\u3002\u4e0e\u4e0a\u6587\u6240\u8ff0\u7528\u6cd5\u4e00\u81f4 <pre><code>    - {func_name: rotate, angle: 90}\n</code></pre></p> <p>\u6548\u679c\u5c55\u793a\uff1a</p> <p> </p>"},{"location":"zh/tutorials/deployment/","title":"\u90e8\u7f72","text":""},{"location":"zh/tutorials/finetune/","title":"\u5fae\u8c03","text":""},{"location":"zh/tutorials/modelarts/","title":"\u4e91\u4e0a\u542f\u52a8","text":""},{"location":"zh/tutorials/quick_start/#mindyolo","title":"MindYOLO \u5feb\u901f\u5165\u95e8","text":"<p>\u672c\u6587\u7b80\u8981\u4ecb\u7ecdMindYOLO\u4e2d\u5185\u7f6e\u7684\u547d\u4ee4\u884c\u5de5\u5177\u7684\u4f7f\u7528\u65b9\u6cd5\u3002</p>"},{"location":"zh/tutorials/quick_start/#_2","title":"\u4f7f\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c\u63a8\u7406","text":"<ol> <li>\u4ecemodel zoo\u4e2d\u9009\u62e9\u4e00\u4e2a\u6a21\u578b\u53ca\u5176\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982\uff0c <code>./configs/yolov7/yolov7.yaml</code>.</li> <li>\u4ecemodel zoo\u4e2d\u4e0b\u8f7d\u76f8\u5e94\u7684\u9884\u8bad\u7ec3\u6a21\u578b\u6743\u91cd\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528\u5185\u7f6e\u914d\u7f6e\u8fdb\u884c\u63a8\u7406\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</li> </ol> <pre><code># NPU (\u9ed8\u8ba4)\npython demo/predict.py --config ./configs/yolov7/yolov7.yaml --weight=/path_to_ckpt/WEIGHT.ckpt --image_path /path_to_image/IMAGE.jpg\n\n# GPU\npython demo/predict.py --config ./configs/yolov7/yolov7.yaml --weight=/path_to_ckpt/WEIGHT.ckpt --image_path /path_to_image/IMAGE.jpg --device_target=GPU\n</code></pre> <p>\u6709\u5173\u547d\u4ee4\u884c\u53c2\u6570\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605<code>demo/predict.py -h</code>\uff0c\u6216\u67e5\u770b\u5176\u6e90\u4ee3\u7801\u3002</p> <ul> <li>\u8981\u5728CPU\u4e0a\u8fd0\u884c\uff0c\u8bf7\u5c06device_target\u7684\u503c\u4fee\u6539\u4e3aCPU.</li> <li>\u7ed3\u679c\u5c06\u4fdd\u5b58\u5728<code>./detect_results</code>\u76ee\u5f55\u4e0b</li> </ul>"},{"location":"zh/tutorials/quick_start/#_3","title":"\u4f7f\u7528\u547d\u4ee4\u884c\u8fdb\u884c\u8bad\u7ec3\u548c\u8bc4\u4f30","text":"<ul> <li>\u6309\u7167YOLO\u683c\u5f0f\u51c6\u5907\u60a8\u7684\u6570\u636e\u96c6\u3002\u5982\u679c\u4f7f\u7528COCO\u6570\u636e\u96c6\uff08YOLO\u683c\u5f0f\uff09\u8fdb\u884c\u8bad\u7ec3\uff0c\u8bf7\u4eceyolov5\u6216darknet\u51c6\u5907\u6570\u636e\u96c6.</li> </ul> <pre><code>  coco/\n    {train,val}2017.txt\n    annotations/\n      instances_{train,val}2017.json\n    images/\n      {train,val}2017/\n          00000001.jpg\n          ...\n          # image files that are mentioned in the corresponding train/val2017.txt\n    labels/\n      {train,val}2017/\n          00000001.txt\n          ...\n          # label files that are mentioned in the corresponding train/val2017.txt\n</code></pre> <ul> <li>\u5728\u591a\u5361NPU/GPU\u4e0a\u8fdb\u884c\u5206\u5e03\u5f0f\u6a21\u578b\u8bad\u7ec3\uff0c\u4ee58\u5361\u4e3a\u4f8b:</li> </ul> <pre><code>mpirun --allow-run-as-root -n 8 python train.py --config ./configs/yolov7/yolov7.yaml  --is_parallel True\n</code></pre> <ul> <li>\u5728\u5355\u5361NPU/GPU/CPU\u4e0a\u8bad\u7ec3\u6a21\u578b\uff1a</li> </ul> <pre><code>python train.py --config ./configs/yolov7/yolov7.yaml </code></pre> <ul> <li>\u5728\u5355\u5361NPU/GPU/CPU\u4e0a\u8bc4\u4f30\u6a21\u578b\u7684\u7cbe\u5ea6\uff1a</li> </ul> <p><pre><code>python test.py --config ./configs/yolov7/yolov7.yaml --weight /path_to_ckpt/WEIGHT.ckpt\n</code></pre> * \u5728\u591a\u5361NPU/GPU\u4e0a\u8fdb\u884c\u5206\u5e03\u5f0f\u8bc4\u4f30\u6a21\u578b\u7684\u7cbe\u5ea6\uff1a</p> <pre><code>mpirun --allow-run-as-root -n 8 python test.py --config ./configs/yolov7/yolov7.yaml --weight /path_to_ckpt/WEIGHT.ckpt --is_parallel True\n</code></pre> <p>\u6ce8\u610f\uff1a\u9ed8\u8ba4\u8d85\u53c2\u4e3a8\u5361\u8bad\u7ec3\uff0c\u5355\u5361\u60c5\u51b5\u9700\u8c03\u6574\u90e8\u5206\u53c2\u6570\u3002 \u9ed8\u8ba4\u8bbe\u5907\u4e3aAscend\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a'device_target'\u7684\u503c\u4e3aAscend/GPU/CPU\u3002 * \u6709\u5173\u66f4\u591a\u9009\u9879\uff0c\u8bf7\u53c2\u9605 <code>train/test.py -h</code>. * \u5728\u4e91\u8111\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u8bf7\u5728\u8fd9\u91cc\u67e5\u770b</p>"},{"location":"zh/tutorials/quick_start/#_4","title":"\u90e8\u7f72","text":"<p>\u8bf7\u5728\u8fd9\u91cc\u67e5\u770b.</p>"},{"location":"zh/tutorials/quick_start/#mindyolo-api","title":"\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528MindYOLO API","text":"<p>\u656c\u8bf7\u671f\u5f85</p>"}]}